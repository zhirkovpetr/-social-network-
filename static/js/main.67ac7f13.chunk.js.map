{"version":3,"sources":["hoc/withAuthRedirect.tsx","redux/dialogs-reducer.ts","components/NavBar/NavBar.module.css","components/Users/Users.module.css","components/Profile/MyPosts/Post/Post.module.css","common/FormsControls/FormsControls.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/NavBar/NavBar.tsx","components/NavBar/NavBarContainer.tsx","API/api.tsx","redux/users-reducer.ts","common/Paginator/Paginator.tsx","assets/images/user.png","components/Users/User.tsx","components/Users/Users.tsx","assets/images/loading.svg","common/Preloader/Preloader.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","redux/profile-reducer.ts","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPostsForm.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/ProfileInfo/ProfileData.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/HeaderContainer.tsx","components/Login/LoginForm.tsx","components/Login/Login.tsx","redux/app-reducer.ts","redux/sideBar-reducer.ts","redux/redux-store.ts","App.tsx","hoc/withSuspense.tsx","index.tsx","utils/validators/validators.tsx","common/FormsControls/FormsControls.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","common/Paginator/Paginator.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Header/Header.module.css"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","ADD_MESSAGE","initialState","dialogs","id","v1","name","messages","message","dialogsReducer","action","type","newMessage","AddMessage","module","exports","FormControl","input","meta","hasError","children","touched","error","className","s","formControl","Textarea","Input","News","Music","Settings","Navbar","React","memo","friendsArray","sideBar","friends","nav","item","activeClassName","activeLink","active","map","friedItem","index","imgFriend","src","alt","nameFriend","NavbarContainer","instance","axios","create","withCredentials","baseURL","headers","usersAPI","currentPage","pageSize","get","post","delete","profileAPI","userId","status","put","image","formData","FormData","append","profile","authAPI","email","password","rememberMe","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_FOLLOWING_IN_PROGRESS","items","totalCount","isFetching","startPage","followingInProgress","follow","unFollow","setCurrentPage","toggleIsFetching","toggleIsFollowingInProgress","Paginator","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","page","onClick","filter","p","onPageChanged","User","photo","photos","small","userPhoto","followed","disabled","some","unFollowTC","followTC","Users","usersPage","u","Preloader","loading","getUsers","getPageSize","getTotalCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainerComponent","pageNumber","getUsersTC","this","PureComponent","UsersContainer","compose","dispatch","a","data","resultCode","response","ADD_POST","ON_KEY_PRESS_HANDLER","SET_USER_PROFILE","SET_STATUS","REMOVE_POST","SAVE_PHOTO_SUCCESS","posts","likesCount","setStatus","getUserPageTC","Post","maxValue","maxLengthCreator","MyPostsForm","onSubmit","handleSubmit","Field","placeholder","component","validate","required","MyPostsReduxForm","reduxForm","form","MyPosts","postsElements","profilePage","postsBlock","AddPost","newPost","MyPostsContainer","onKeyPressHandler","ProfileStatusWithHooks","editMode","setEditMode","useEffect","onDoubleClick","isOwner","autoFocus","onBlur","updateStatusTC","onChange","e","currentTarget","value","ProfileData","descriptionBlock","goToEditMode","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","Object","entries","contacts","key","contactName","contactValue","Contact","contactForm","ProfileDataReduxForm","Form","formSummaryError","ProfileInfo","mainPhoto","target","files","length","savePhotoTC","deactivateEditMode","profileForm","saveProfileTC","then","initialValues","Profile","ProfileContainer","match","params","authorizedUserId","history","getStatusTC","refreshProfile","prevProps","prevState","snapshot","getState","toString","stopSubmit","_error","Promise","reject","withRouter","Header","header","loginBlock","login","logoutTC","SET_USER_DATA","setUserData","payload","getUserLoginTC","HeaderContainerComponent","HeaderContainer","LoginForm","LoginReduxForm","Login","loginTC","SET_INITIALIZED","isInitialized","rootReducer","combineReducers","postId","dialogsPage","formReducer","app","composeEnhancers","window","REDUX_DEVTOOLS_EXTENSION_COMPOSE","store","createStore","applyMiddleware","thunk","DialogsContainer","lazy","App","initializedTC","initialized","path","render","Suspense","fallback","AppContainer","promise","all","catch","console","warn","SamuraiJSApp","ReactDOM","StrictMode","document","getElementById","maxLength"],"mappings":"iNASMA,EAAkB,SAACC,GACrB,MAAO,CACHC,OAAQD,EAAME,KAAKD,SAIpB,SAASE,EAAoBC,GAOhC,OAAOC,YAAQN,EAARM,EALmB,SAACC,GAAgC,IAClDL,EAAwBK,EAAxBL,OAAWM,EADsC,YACzBD,EADyB,YAEtD,OAAKL,EACE,cAACG,EAAD,eAAeG,IADF,cAAC,IAAD,CAAUC,GAAI,gB,gIChBpCC,EAAc,qCAGhBC,EAAe,CACfC,QAAS,CACL,CAACC,GAAIC,cAAMC,KAAM,UACjB,CAACF,GAAIC,cAAMC,KAAM,QACjB,CAACF,GAAIC,cAAMC,KAAM,UACjB,CAACF,GAAIC,cAAMC,KAAM,SACjB,CAACF,GAAIC,cAAMC,KAAM,WAErBC,SAAU,CACN,CAACH,GAAIC,cAAMG,QAAS,OACpB,CAACJ,GAAIC,cAAMG,QAAS,OACpB,CAACJ,GAAIC,cAAMG,QAAS,cACpB,CAACJ,GAAIC,cAAMG,QAAS,SACpB,CAACJ,GAAIC,cAAMG,QAAS,qBAKfC,EAAiB,WAA4F,IAA3FjB,EAA0F,uDAAhEU,EAAcQ,EAAkD,uCACrH,OAAQA,EAAOC,MACX,KAAKV,EACD,IAAMW,EAAaF,EAAOE,WAC1B,OAAO,2BACApB,GADP,IAEIe,SAAS,GAAD,mBAAMf,EAAMe,UAAZ,CAAsB,CAACH,GAAIC,cAAMG,QAASI,OAG1D,QACI,OAAOpB,IAUNqB,EAAY,SAACD,GACtB,MAAO,CACHD,KAAMV,EAAaW,gB,mBC7C3BE,EAAOC,QAAU,CAAC,IAAM,oBAAoB,KAAO,qBAAqB,WAAa,2BAA2B,QAAU,wBAAwB,UAAY,0BAA0B,WAAa,6B,oBCArMD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,OAAS,sBAAsB,MAAQ,uB,oBCA1FD,EAAOC,QAAU,CAAC,KAAO,qB,kMCIZC,EAA2C,SAAClB,GACPA,EAAvCmB,MADyD,IAClDC,EAAgCpB,EAAhCoB,KAERC,GAFwCrB,EAA1BsB,SAD2C,YACjBtB,EADiB,6BAG9CoB,EAAKG,SAAWH,EAAKI,OACtC,OACI,sBAAKC,UAAS,UAAKC,IAAEC,YAAP,oBAA8BN,EAAWK,IAAEF,MAAQ,IAAjE,UACI,8BACKxB,EAAMsB,WAEX,8BACKD,GAAY,+BAAOD,EAAKI,cAM5BI,EAAwC,SAAC5B,GAAW,IACtDmB,EAAuCnB,EAAvCmB,MAA0BlB,GAAaD,EAAhCoB,KAAgCpB,EAA1BsB,SADwC,YACdtB,EADc,8BAE5D,OACG,cAACkB,EAAD,2BAAiBlB,GAAjB,aAAwB,oDAAcmB,GAAWlB,QAK3C4B,EAAqC,SAAC7B,GAAW,IACnDmB,EAAuCnB,EAAvCmB,MAA0BlB,GAAaD,EAAhCoB,KAAgCpB,EAA1BsB,SADqC,YACXtB,EADW,8BAEzD,OACI,cAACkB,EAAD,2BAAiBlB,GAAjB,aAAwB,iDAAWmB,GAAWlB,S,sJCzBvC6B,EAJF,WACT,OAAQ,wCCMGC,EAPD,WAEV,OAAQ,yCCACC,EAAW,SAAChC,GACrB,OAAQ,4C,yBCqCGiC,EAtC2BC,IAAMC,MAAK,SAAAnC,GACjD,IAAMoC,EAAepC,EAAMqC,QAAQC,QACnC,OACI,sBAAKb,UAAWC,IAAEa,IAAlB,UACA,qBAAKd,UAAWC,IAAEc,KAAlB,SACA,cAAC,IAAD,CAAStC,GAAI,WAAYuC,gBAAiBf,IAAEgB,WAA5C,uBAEA,qBAAKjB,UAAS,UAAKC,IAAEc,KAAP,YAAed,IAAEiB,QAA/B,SACJ,cAAC,IAAD,CAASzC,GAAG,WAAWuC,gBAAiBf,IAAEgB,WAA1C,wBAEI,qBAAKjB,UAAWC,IAAEc,KAAlB,SACJ,cAAC,IAAD,CAAStC,GAAG,QAAQuC,gBAAiBf,IAAEgB,WAAvC,oBAEI,qBAAKjB,UAAWC,IAAEc,KAAlB,SACJ,cAAC,IAAD,CAAStC,GAAG,SAASuC,gBAAiBf,IAAEgB,WAAxC,qBAEI,qBAAKjB,UAAWC,IAAEc,KAAlB,SACJ,cAAC,IAAD,CAAStC,GAAG,YAAYuC,gBAAiBf,IAAEgB,WAA3C,wBAEI,sBAAKjB,UAAWC,IAAEc,KAAlB,UACJ,cAAC,IAAD,CAAStC,GAAG,WAAWuC,gBAAiBf,IAAEgB,WAA1C,qBACI,qBAAKjB,UAAWC,IAAEY,QAAlB,SACCF,EAAaQ,KAAI,SAACC,EAAWC,GAAZ,OACV,8BACA,sBAAMrB,UAAWC,IAAEqB,UAAnB,SACA,qBAAKC,IAAI,+HAA+HC,IAAI,aAEhJ,sBAAMxB,UAAWC,IAAEwB,WAAnB,SACA,cAAC,IAAD,CAAShD,GAAI,WAAY2C,EAAUvC,GAAImC,gBAAiBf,IAAEgB,WAA1D,SAAuEG,EAAUrC,WALrEsC,iBCGXK,EAAkBpD,aAVP,SAACL,GACrB,MAAO,CACH2C,QAAS3C,EAAM2C,WAQmC,GAA3BtC,CAA+BkC,G,iDC3BxDmB,E,OAAWC,EAAMC,OAAO,CAC1BC,iBAAiB,EACjBC,QAAQ,gDACRC,QAAS,CACL,UAAW,0CAINC,EAAW,SACXC,EAAqBC,GAC1B,OAAOR,EAASS,IAAT,qBAAyCF,EAAzC,kBAA8DC,KAFhEF,EAAW,SAIRpD,GACR,OAAO8C,EAASU,KAAT,iBAAgDxD,GAAM,KALxDoD,EAAW,SAONpD,GACV,OAAO8C,EAASW,OAAT,iBAA4CzD,GAAM,KAIpD0D,EAAW,SACLC,GACX,OAAOb,EAASS,IAAT,kBAAqCI,KAFvCD,EAAW,SAIVC,GACN,OAAOb,EAASS,IAAT,yBAA+BI,KALjCD,EAAW,SAOPE,GACT,OAAOd,EAASe,IAAT,iBAAiD,CAACD,OAAQA,KAR5DF,EAAW,SAUVI,GACN,IAAMC,EAAW,IAAIC,SAErB,OADAD,EAASE,OAAO,QAASH,GAClBhB,EAASe,IAA4D,iBAAkBE,EAAU,CACpGZ,QAAS,CACL,eAAgB,0BAfnBO,EAAW,SAmBRQ,GACR,OAAOpB,EAASe,IAAsB,UAAWK,IAI5CC,EAAQ,WAEb,OAAOrB,EAASS,IAAT,YAFFY,EAAQ,SAIXC,EAAeC,EAAkBC,GACnC,OAAOxB,EAASU,KAAT,aAA4D,CAACY,QAAOC,WAAUC,gBALhFH,EAAQ,WAQb,OAAOrB,EAASW,OAAT,eCnDTc,EAAS,gCACTC,EAAW,kCACXC,EAAY,mCACZC,EAAmB,0CACnBC,EAAwB,+CACxBC,EAAqB,4CACrBC,EAA+B,sDAG1B/E,EAAe,CACtBgF,MAAO,GACPxB,SAAU,GACVyB,WAAY,EACZ1B,YAAa,EACb2B,YAAY,EACZC,UAAW,EACXC,oBAAqB,IAoEZC,EAAS,SAACxB,GACnB,MAAO,CACHpD,KAAMgE,EAAQZ,WAITyB,EAAW,SAACzB,GACrB,MAAO,CACHpD,KAAMiE,EAAUb,WAcX0B,EAAiB,SAAChC,GAC3B,MAAO,CACH9C,KAAMmE,EAAkBrB,gBAGnBiC,EAAmB,SAACN,GAC7B,MAAO,CACHzE,KAAMqE,EAAoBI,eAGrBO,EAA8B,SAAC5B,EAAgBqB,GACxD,MAAO,CACHzE,KAAMsE,EAA8BlB,SAAQqB,e,4BCjHvCQ,GAAY5D,IAAMC,MAAK,SAACnC,GAIjC,IAHA,IACI+F,EAAaC,KAAKC,KAAKjG,EAAMqF,WAAarF,EAAM4D,UAChDsC,EAAQ,GACHC,EAAI,EAAGA,GAAKJ,EAAYI,IAC7BD,EAAME,KAAKD,GAGf,IAAIE,EAAeL,KAAKC,KAAKF,EAPX,IAD6C,EASrBO,mBAAS,GATY,mBASxDC,EATwD,KASzCC,EATyC,KAU3DC,EATc,IASWF,EAAgB,GAAmB,EAC5DG,EAVc,GAUWH,EAC7B,OACI,sBAAK9E,UAAWC,KAAEiF,KAAlB,UACKJ,EAAgB,GACjB,wBAAQK,QAAS,WAAMJ,EAAiBD,EAAgB,IAAxD,gBACCL,EACIW,QAAO,SAAAC,GAAC,OAAIA,GAAKL,GAAyBK,GAAKJ,KAC/C9D,KAAI,SAACkE,GACF,OAAO,sBACHrF,UAAWzB,EAAM2D,cAAgBmD,EAAIpF,KAAEiC,YAAc,GAE5CiD,QAAS,WACL5G,EAAM+G,cAAcD,IAJ9B,SAKUA,GAHCA,MAKzBT,EAAeE,GAChB,wBAAQK,QAAS,WAAMJ,EAAiBD,EAAgB,IAAxD,wB,qBCrCG,OAA0B,iCCc5BS,GAAO9E,IAAMC,MAAK,SAACnC,GAE5B,OAAQ,gCACA,iCACI,8BACI,cAAC,IAAD,CAASE,GAAE,mBAAcF,EAAMoF,MAAM9E,IAArC,SACA,qBAAK2C,IAAK,SAAUxB,UAAWC,KAAEuF,MAAOjE,IAAkC,OAA7BhD,EAAMoF,MAAM8B,OAAOC,MAAiBnH,EAAMoF,MAAM8B,OAAOC,MAAQC,SAGhH,8BACKpH,EAAMoF,MAAMiC,SACP,wBAAQC,SAAUtH,EAAMwF,oBAAoB+B,MAAK,SAAAjH,GAAE,OAAIA,IAAON,EAAMoF,MAAM9E,MAAKsG,QAAS,WACtF5G,EAAMwH,WAAWxH,EAAMoF,MAAM9E,KAD/B,sBAGF,wBAAQgH,SAAUtH,EAAMwF,oBAAoB+B,MAAK,SAAAjH,GAAE,OAAIA,IAAON,EAAMoF,MAAM9E,MAAKsG,QAAS,WACpF5G,EAAMyH,SAASzH,EAAMoF,MAAM9E,KAD/B,yBAKhB,iCACQ,iCACI,gCAAMN,EAAMoF,MAAM5E,KAAlB,IAAyB,eACzB,8BAA6B,OAAvBR,EAAMoF,MAAMlB,OAAkBlE,EAAMoF,MAAMlB,OAAS,kBAE7D,iCACI,8BAAM,uBACN,8BAAM,gCCxBbwD,GAAQxF,IAAMC,MAAK,SAACnC,GAG7B,OAAQ,gCACJ,cAAC8F,GAAD,CAAWT,WAAYrF,EAAMqF,WAAYzB,SAAU5D,EAAM4D,SAC9CmD,cAAe/G,EAAM+G,cAAepD,YAAa3D,EAAM2D,cAClE,8BAEQ3D,EAAM2H,UAAU/E,KAAI,SAAAgF,GAAC,OAAI,cAACZ,GAAD,CAAiB5B,MAAOwC,EAClBpC,oBAAqBxF,EAAMwF,oBAC3BiC,SAAUzH,EAAMyH,SAAUD,WAAYxH,EAAMwH,YAFvCI,EAAEtH,eCxBvC,OAA0B,oCCI5BuH,GAAY,WACrB,OAAQ,8BACJ,qBAAK5E,IAAK,uBAAwBD,IAAK8E,Q,QCJlCC,GAAU,SAACrI,GACpB,OAAOA,EAAMiI,UAAUvC,OAGd4C,GAAa,SAACtI,GACvB,OAAOA,EAAMiI,UAAU/D,UAGdqE,GAAe,SAACvI,GACzB,OAAOA,EAAMiI,UAAUtC,YAGd6C,GAAgB,SAACxI,GAC1B,OAAOA,EAAMiI,UAAUhE,aAGdwE,GAAe,SAACzI,GACzB,OAAOA,EAAMiI,UAAUrC,YAGd8C,GAAwB,SAAC1I,GAClC,OAAOA,EAAMiI,UAAUnC,qBCWrB6C,G,4MAOFtB,cAAgB,SAACuB,GAAwB,IAC9B1E,EAAW,EAAK5D,MAAhB4D,SACP,EAAK5D,MAAMuI,WAAWD,EAAY1E,I,uDAPtC,WAAqB,IAAD,EACe4E,KAAKxI,MAA7B2D,EADS,EACTA,YAAaC,EADJ,EACIA,SACpB4E,KAAKxI,MAAMuI,WAAW5E,EAAaC,K,oBAQvC,WACI,OAAO,qCACF4E,KAAKxI,MAAMsF,WAAa,cAAC,GAAD,IAAe,KACxC,cAACoC,GAAD,CAAOrC,WAAYmD,KAAKxI,MAAMqF,WACvBzB,SAAU4E,KAAKxI,MAAM4D,SACrBD,YAAa6E,KAAKxI,MAAM2D,YACxBgE,UAAWa,KAAKxI,MAAM2H,UACtBF,SAAUe,KAAKxI,MAAMyH,SACrBD,WAAYgB,KAAKxI,MAAMwH,WACvBT,cAAeyB,KAAKzB,cACpBvB,oBAAqBgD,KAAKxI,MAAMwF,6B,GAtBbtD,IAAMuG,eAwC/BC,GAAgBC,aACzB5I,aAZoB,SAACL,GACrB,MAAO,CACHiI,UAAWI,GAASrI,GACpBkE,SAAUoE,GAAYtI,GACtB2F,WAAY4C,GAAcvI,GAC1BiE,YAAauE,GAAexI,GAC5B4F,WAAY6C,GAAczI,GAC1B8F,oBAAqB4C,GAAuB1I,MAKrB,CAAC+H,SRiER,SAACxD,GACrB,8CAAO,WAAO2E,GAAP,SAAAC,EAAA,6DACHD,EAAS/C,EAA4B5B,GAAQ,IAD1C,SAEmBP,EAAqBO,GAFxC,OAGkC,IAHlC,OAGc6E,KAAKC,YACdH,EAASnD,EAAOxB,IAEpB2E,EAAS/C,EAA4B5B,GAAQ,IAN9C,2CAAP,uDQlEsCuD,WR4EhB,SAACvD,GACvB,8CAAO,WAAO2E,GAAP,SAAAC,EAAA,6DACHD,EAAS/C,EAA4B5B,GAAQ,IAD1C,SAEmBP,EAAuBO,GAF1C,OAGkC,IAHlC,OAGc6E,KAAKC,YACdH,EAASlD,EAASzB,IAEtB2E,EAAS/C,EAA4B5B,GAAQ,IAN9C,2CAAP,uDQ7EkD0B,iBAAgBE,8BAA6B0C,WRsDrE,SAAC5E,EAAqBC,GAChD,8CAAO,WAAOgF,GAAP,eAAAC,EAAA,6DACHD,EAAShD,GAAiB,IADvB,SAEmBlC,EAAkBC,EAAaC,GAFlD,OAEGoF,EAFH,OAGCJ,EAAShD,GAAiB,IAC1BgD,GAjCaxD,EAiCK4D,EAASF,KAAK1D,MAhCjC,CACHvE,KAAMkE,EAAWK,WAgCbwD,GA7BuBvD,EA6BK2D,EAASF,KAAKzD,WA5B3C,CACHxE,KAAMoE,EAAuBI,gBA4BzBuD,EAASjD,EAAehC,IANzB,iCAxBuB,IAAC0B,EALVD,IA6Bd,OAAP,yDQxDyBuD,CAE3BN,I,kBCrEIY,GAAW,kCACXC,GAAuB,8CACvBC,GAAmB,0CACnBC,GAAa,oCACbC,GAAc,qCACdC,GAAqB,4CAIvBlJ,GAAe,CACf8D,OAAQ,GACRqF,MAAO,CACH,CAACjJ,GAAIC,eAAMG,QAAS,iBAAkB8I,WAAY,IAClD,CAAClJ,GAAIC,eAAMG,QAAS,sBAAuB8I,WAAY,KAE3DhF,QAAS,KACTc,YAAY,GAqFHmE,GAAY,SAACvF,GACtB,MAAO,CACHrD,KAAMuI,GAAYlF,WAwBbwF,GAAgB,SAACzF,GAC1B,8CAAO,WAAO2E,GAAP,eAAAC,EAAA,sEACoB7E,EAA0BC,GAD9C,OACG+E,EADH,OAEHJ,GAnCuBpE,EAmCCwE,EAASF,KAlC9B,CACHjI,KAAMsI,GAAkB3E,QAASA,KA+B9B,iCAjCmB,IAACA,IAiCpB,OAAP,uD,qBC9HSmF,GAAOzH,IAAMC,MAAK,SAACnC,GAC5B,OAAO,sBAAKyB,UAAWC,KAAEc,KAAlB,UACH,qBAAKS,IAAK,cACND,IAAI,gqVACPhD,EAAMU,QACP,8BACI,0CAAaV,EAAMwJ,sB,0DCNzBI,GAAUC,aAAiB,IAEpBC,GAAc5H,IAAMC,MAAK,SAACnC,GACnC,OACI,uBAAM+J,SAAU/J,EAAMgK,aAAtB,UACI,8BACI,cAACC,GAAA,EAAD,CAAOC,YAAa,qBAAsBrJ,KAAK,OAAOL,KAAM,UAAW2J,UAAWvI,KAAUwI,SAAU,CAAEC,KAAUT,QAEtH,8BACI,wBAAQ/I,KAAK,SAAb,8BAMHyJ,GAAmBpI,IAAMC,KAAKoI,aAAwB,CAACC,KAAM,kBAA/BD,CAAkDT,KCZhFW,GAAsCvI,IAAMC,MAAK,SAAAnC,GAC1D,IAAI0K,EAAgB1K,EAAM2K,YAAYpB,MAAM3G,KAAI,SAAAkE,GAAC,OAAI,cAAC6C,GAAD,CAAiBjJ,QAASoG,EAAEpG,QACtB8I,WAAY1C,EAAE0C,YADT1C,EAAExG,OAQlE,OAAO,sBAAKmB,UAAWC,KAAEkJ,WAAlB,UACH,0CACA,cAACN,GAAD,CAAkBP,SAPJ,SAACjG,GACf9D,EAAM6K,QAAQ/G,EAAKgH,SACnBhH,EAAKgH,QAAU,MAMf,qBAAKrJ,UAAWC,KAAE6H,MAAlB,SACKmB,UCNAK,GAAmBhL,aANR,SAACL,GACrB,MAAO,CACHiL,YAAajL,EAAMiL,eAIgC,CAACE,QJwErC,SAACC,GACpB,MAAO,CACHjK,KAAMoI,GAAU6B,YI1E6CE,kBJ8EpC,SAACF,GAC9B,MAAO,CACHjK,KAAMqI,GAAsB4B,QAASA,KIhFb/K,CAAyD0K,I,oBCX5EQ,GAAyB/I,IAAMC,MAAK,SAACnC,GAA4C,IAAD,EAE3DsG,oBAAkB,GAFyC,mBAEpF4E,EAFoF,KAE1EC,EAF0E,OAG/D7E,mBAAiBtG,EAAMkE,QAHwC,mBAGpFA,EAHoF,KAG5EuF,EAH4E,KAKzF2B,qBAAU,WACN3B,EAAUzJ,EAAMkE,UACjB,CAAClE,EAAMkE,SAcV,OACI,iCACMgH,GACF,8BACI,uBAAMG,cAhBO,WACrBrL,EAAMsL,SAAWH,GAAY,IAerB,UAAuC,yCAAgBnL,EAAMkE,QAAU,iBAG1EgH,GACD,8BACI,uBAAOK,WAAS,EAACC,OAlBM,WAC/BL,GAAY,GACZnL,EAAMyL,eAAevH,IAgBwCwH,SAb1C,SAACC,GACpBlC,EAAUkC,EAAEC,cAAcC,QAY6DA,MAAO3H,YC5BzF4H,GAAc5J,IAAMC,MAAK,SAACnC,GAEnC,OACI,sBAAKyB,UAAWC,KAAEqK,iBAAlB,UACC/L,EAAMsL,SAAW,8BACd,wBAAQ1E,QAAS,kBAAM5G,EAAMgM,cAAa,IAA1C,oBAEJ,gCACI,2CADJ,IACuBhM,EAAMwE,QAAQyH,YAErC,gCACI,mDADJ,IAC+BjM,EAAMwE,QAAQ0H,eAAiB,MAAQ,QAErElM,EAAMwE,QAAQ0H,gBACf,gCACI,2CADJ,IACuBlM,EAAMwE,QAAQ2H,6BAErC,gCACI,0CADJ,IACsBnM,EAAMwE,QAAQ4H,WAEpC,gCACI,0CADJ,IACsBC,OAAOC,QAAQtM,EAAMwE,QAAQ+H,UAAU3J,KAAI,YAAmB,IAAD,mBAAhB4J,EAAgB,KAAXX,EAAW,KAC/E,OAAO,cAAC,GAAD,CAAmBY,YAAaD,EAAKE,aAAcb,GAArCW,eAWpBG,GAAU,SAAC3M,GACpB,OACI,sBAAKyB,UAAWC,KAAEkL,YAAlB,UACI,8BAAI5M,EAAMyM,YAAV,OADJ,IACiCzM,EAAM0M,iB,8BCAlCG,GAAuBtC,aAAiD,CAACC,KAAM,gBAAxDD,EAlC0F,SAAC,GAAmC,IAAlCP,EAAiC,EAAjCA,aAAcxI,EAAmB,EAAnBA,MAAOgD,EAAY,EAAZA,QACjJ,OACI,eAACsI,GAAA,EAAD,CAAM/C,SAAUC,EAAhB,UACI,8BAAK,wBAAQpD,QAAS,aAAjB,oBAEDpF,GACA,qBAAKC,UAAWC,KAAEqL,iBAAlB,SACKvL,IAGT,gCACI,2CADJ,IACsB,cAACyI,GAAA,EAAD,CAAOpJ,KAAM,OAAQqJ,YAAa,YAAa1J,KAAM,WAAY2J,UAAWtI,UAElG,gCACI,mDADJ,IAC8B,cAACoI,GAAA,EAAD,CAAOpJ,KAAM,WAAYL,KAAM,iBAAkB2J,UAAWtI,UAE1F,gCACI,2CADJ,IACsB,cAACoI,GAAA,EAAD,CAAOpJ,KAAM,OAAQL,KAAM,4BAA6B2J,UAAWvI,UAEzF,gCACI,0CADJ,IACqB,cAACqI,GAAA,EAAD,CAAOpJ,KAAM,OAAQL,KAAM,UAAW2J,UAAWvI,UAEtE,gCACI,0CADJ,IACsByK,OAAOC,QAAQ9H,EAAQ+H,UAAU3J,KAAI,YAAY,IAAV4J,EAAS,oBAClE,OAAO,gCACH,kCAAKA,EAAL,QADG,IACa,cAACvC,GAAA,EAAD,CAAOpJ,KAAM,OAAQqJ,YAAasC,EAAKhM,KAAM,YAAcgM,EAAKrC,UAAWtI,SAD9E2K,eClBpBQ,GAAc9K,IAAMC,MAAK,SAACnC,GAAiC,IAAD,EACnCsG,oBAAS,GAD0B,mBAC5D4E,EAD4D,KAClDC,EADkD,KAkBnE,OAAKnL,EAAMwE,QAGA,8BACH,sBAAK/C,UAAWC,KAAEqK,iBAAlB,UACI,qBAAKtK,UAAWC,KAAEuL,UAAWhK,IAAK,UAC7BD,IAAoC,OAA/BhD,EAAMwE,QAAQ0C,OAAOC,MAAiBnH,EAAMwE,QAAQ0C,OAAOC,MAAQC,KAC5EpH,EAAMsL,SAAW,uBAAOzK,KAAM,OAAQ6K,SAZvB,SAACC,GAAsC,IAAD,GAC9D,UAAIA,EAAEuB,OAAOC,aAAb,aAAI,EAAgBC,SAChBpN,EAAMqN,YAAY1B,EAAEuB,OAAOC,MAAM,OAY7B,cAAClC,GAAD,CAAwB/G,OAAQlE,EAAMkE,OAAQuH,eAAgBzL,EAAMyL,eAC5CH,QAAStL,EAAMsL,UACtCJ,EAAW,cAAC2B,GAAD,CAAsBrI,QAASxE,EAAMwE,QAAS8I,mBApB3C,aAoBmFvD,SA1B7F,SAACwD,GACfvN,EAAMwN,cAAcD,GAAaE,MAC7B,kBAAMtC,GAAY,OAwByGuC,cAAe1N,EAAMwE,UACvI,cAACsH,GAAD,CAAatH,QAASxE,EAAMwE,QAAS8G,QAAStL,EAAMsL,QAASU,aAAcb,SAXhF,cAAC,GAAD,OC9BFwC,GAAUzL,IAAMC,MAAK,SAACnC,GAC/B,OAAKA,EAAML,OAIP,gCACI,cAACqN,GAAD,CAAaxI,QAASxE,EAAMwE,QACfN,OAAQlE,EAAMkE,OACduH,eAAgBzL,EAAMyL,eACtBH,QAAStL,EAAMsL,QACf+B,YAAarN,EAAMqN,YACnBG,cAAexN,EAAMwN,gBAClC,cAACzC,GAAD,OAVI,cAAC,IAAD,CAAU7K,GAAI,c,UCgCxB0N,G,oKAEF,WACI,IAAI3J,EAASuE,KAAKxI,MAAM6N,MAAMC,OAAO7J,OAChCA,IAAQA,EAASuE,KAAKxI,MAAM+N,kBAC5B9J,GAAQuE,KAAKxI,MAAMgO,QAAQ5H,KAAK,SACjCnC,IACAuE,KAAKxI,MAAM0J,cAAczF,GACzBuE,KAAKxI,MAAMiO,YAAYhK,M,+BAI/B,WACIuE,KAAK0F,mB,gCAGT,SAAmBC,EAAgCC,EAA0BC,GACrE7F,KAAKxI,MAAM6N,MAAMC,OAAO7J,SAAWkK,EAAUN,MAAMC,OAAO7J,QAC1DuE,KAAK0F,mB,oBAIb,WACI,OACI,cAACP,GAAD,2BACQnF,KAAKxI,OADb,IAEIsL,SAAU9C,KAAKxI,MAAM6N,MAAMC,OAAO7J,OAClCO,QAASgE,KAAKxI,MAAMwE,QACpBN,OAAQsE,KAAKxI,MAAMkE,OACnBuH,eAAgBjD,KAAKxI,MAAMyL,eAC3B9L,OAAQ6I,KAAKxI,MAAML,OACnB0N,YAAa7E,KAAKxI,MAAMqN,YACxBG,cAAehF,KAAKxI,MAAMwN,qB,GAhCXtL,IAAMuG,eA6CtBE,gBACX9I,KACAE,aAToB,SAACL,GAAD,MAA6C,CACjE8E,QAAS9E,EAAMiL,YAAYnG,QAC3BN,OAAQxE,EAAMiL,YAAYzG,OAC1BvE,OAAQD,EAAME,KAAKD,OACnBoO,iBAAkBrO,EAAME,KAAKU,MAKF,CACvBoJ,iBACAuE,YVmDmB,SAAChK,GACxB,8CAAO,WAAO2E,GAAP,eAAAC,EAAA,sEACoB7E,EAAqBC,GADzC,OACG+E,EADH,OAEHJ,EAASa,GAAUT,EAASF,OAFzB,2CAAP,uDUnDI2C,eVyDsB,SAACvH,GAC3B,8CAAO,WAAO0E,GAAP,SAAAC,EAAA,sEACoB7E,EAAwBE,GAD5C,OAE8B,IAF9B,OAEU4E,KAAKC,YACdH,EAASa,GAAUvF,IAHpB,2CAAP,uDUzDImJ,YViEmB,SAACjJ,GAAD,8CAA+B,WAAOwE,GAAP,eAAAC,EAAA,sEAC/B7E,EAAqBI,GADU,OAErB,KAD3B4E,EADgD,QAEzCF,KAAKC,YACdH,GAvCyB3B,EAuCC+B,EAASF,KAAKA,KAAK5B,OAAOC,MAtCjD,CACHtG,KAAMyI,GAAoBrC,WAkCwB,iCApC1B,IAACA,IAoCyB,OAA/B,uDUhEnBuG,cVuEqB,SAAChJ,GAAD,8CAAwC,WAAOoE,EAA6F0F,GAApG,iBAAAzF,EAAA,6DAC3D5E,EAASqK,IAAW1O,KAAKU,GADkC,SAG1C0D,EAAuBQ,GAHmB,UAIhC,KAD3BwE,EAH2D,QAIpDF,KAAKC,WAJ+C,gBAK7DH,EAASc,GAAczF,EAAOsK,aAL+B,8BAO7D3F,EAAS4F,aAAW,eAAgB,CAACC,OAAQzF,EAASF,KAAKrI,SAAS,MAPP,kBAQtDiO,QAAQC,OAAO3F,EAASF,KAAKrI,SAAS,KARgB,4CAAxC,2DUrEzBmO,IATWjG,CAUbiF,I,oBCvEaiB,GAbA3M,IAAMC,MAAK,SAACnC,GAEvB,OAAO,yBAAQyB,UAAWC,KAAEoN,OAArB,UACH,qBAAK7L,IAAK,OAAQD,IAAI,oDAEtB,sBAAKvB,UAAWC,KAAEqN,WAAlB,UACK/O,EAAMsF,WAAa,cAAC,GAAD,IAAe,KAClCtF,EAAML,OACH,oCAAOK,EAAMgP,MAAb,KAAqB,wBAAQpI,QAAS5G,EAAMiP,SAAvB,qBAArB,OACE,cAAC,IAAD,CAAS/O,GAAI,SAAb,gCCfZgP,GAAgB,oCAChBhK,GAAqB,yCAGvB9E,GAAc,CACdE,GAAI,EACJ0O,MAAO,KACPtK,MAAO,KACPqE,WAAY,EACZzD,YAAY,EACZ3F,QAAQ,GA4BCwP,GAAc,SAAC7O,EAAYoE,EAAsBsK,EAAsBrP,GAChF,MAAO,CACHkB,KAAMqO,GAAeE,QAAS,CAAC9O,KAAIoE,QAAOsK,QAAOrP,YAI5CiG,GAAmB,SAACN,GAC7B,MAAO,CACHzE,KAAMqE,GAAoBI,WAAYA,IAKjC+J,GAAiB,WAC1B,8CAAO,WAAOzG,GAAP,uBAAAC,EAAA,6DACHD,EAAShD,IAAiB,IADvB,SAEmBnB,IAFnB,OAGsC,KADnCuE,EAFH,QAGkBF,KAAKC,aAAmB,EACRC,EAASF,KAAKA,KAAlCxI,EAD2B,EAC3BA,GAAI0O,EADuB,EACvBA,MAAOtK,EADgB,EAChBA,MAChBkE,EAASuG,GAAY7O,EAAIoE,EAAOsK,GAAO,KAE3CpG,EAAShD,IAAiB,IAP/B,2CAAP,uDClCE0J,G,4JAEF,WACI,OAAO,cAAC,GAAD,eAAY9G,KAAKxI,Y,GAHOkC,IAAMpC,WAiBhCyP,GAAkBxP,aAVP,SAACL,GACrB,MAAO,CACHY,GAAIZ,EAAME,KAAKU,GACfoE,MAAOhF,EAAME,KAAK8E,MAClBsK,MAAOtP,EAAME,KAAKoP,MAClB1J,WAAY5F,EAAME,KAAK0F,WACvB3F,OAAQD,EAAME,KAAKD,UAI+B,CAACsP,SDwCnC,WACpB,8CAAO,WAAOrG,GAAP,SAAAC,EAAA,sEACmBpE,IADnB,OAEsC,IAFtC,OAEkBqE,KAAKC,YACdH,EAASuG,GAAY,EAAG,KAAM,MAAM,IAH7C,2CAAP,wDCzC2BpP,CAAuCuP,IC5BhE1F,GAAWC,aAAiB,IAErB2F,GAAYtN,IAAMC,MAAK,SAACnC,GACjC,OACI,uBAAM+J,SAAU/J,EAAMgK,aAAtB,UACI,uCACA,8BACI,cAACC,GAAA,EAAD,CAAOC,YAAa,QAAS1J,KAAM,QAAS2J,UAAWtI,KAAOuI,SAAU,CAACC,KAAUT,QAEvF,8BACI,cAACK,GAAA,EAAD,CAAOC,YAAa,WAAY1J,KAAM,WAAYK,KAAM,WAAYsJ,UAAWtI,KACxEuI,SAAU,CAACC,KAAUT,QAEhC,gCACI,cAACK,GAAA,EAAD,CAAOpJ,KAAM,WAAYL,KAAM,aAAc2J,UAAWtI,OAD5D,iBAKI7B,EAAMwB,OACN,qBAAKC,UAAWC,KAAEqL,iBAAlB,SACK/M,EAAMwB,QAGf,8BACI,mDAKHiO,GAAiBlF,aAAwB,CAACC,KAAM,SAA/BD,CAAyCiF,ICnBjEE,GAAQxN,IAAMC,MAAK,SAACnC,GAMtB,OAAIA,EAAML,OACC,cAAC,IAAD,CAAUO,GAAI,aAEjB,8BACJ,cAACuP,GAAD,CAAgB1F,SATH,SAAC1F,GAA4B,IACnCK,EAA+BL,EAA/BK,MAAOC,EAAwBN,EAAxBM,SAAUC,EAAcP,EAAdO,WACxB5E,EAAM2P,QAAQjL,EAAOC,EAAUC,WAWxB7E,gBAtBS,SAACL,GACrB,MAAO,CACHC,OAAQD,EAAME,KAAKD,UAoBa,CAACgQ,QHgClB,SAACjL,EAAeC,EAAkBC,GACrD,8CAAO,WAAOgE,GAAP,iBAAAC,EAAA,sEACmBpE,EAAcC,EAAOC,EAAUC,GADlD,OAEsC,KADnCoE,EADH,QAEkBF,KAAKC,WACdH,EAASyG,OAEL3O,EAAUsI,EAASF,KAAKrI,SAAS2M,OAAS,EAAIpE,EAASF,KAAKrI,SAAS,GAAK,mCAC9EmI,EAAS4F,aAAW,QAAS,CAACC,OAAQ/N,MAN/C,2CAAP,wDGjCWX,CAAoC2P,IChC7CE,GAAkB,qCAGbxP,GAAe,CACtByP,eAAe,G,UCLfzP,GAAe,CACfkC,QAAS,CACL,CAAChC,GAAIC,eAAMC,KAAM,UACjB,CAACF,GAAIC,eAAMC,KAAM,QACjB,CAACF,GAAIC,eAAMC,KAAM,Y,oBCMrBsP,GAAaC,aAAgB,CAC7BpF,YlBY0B,WAA4F,IAA3FjL,EAA0F,uDAAhEU,GAAcQ,EAAkD,uCACrH,OAAQA,EAAOC,MACX,KAAKoI,GACD,IAAM6B,EAAUlK,EAAOkK,QACvB,OAAO,2BACApL,GADP,IAEI6J,MAAM,GAAD,mBAAM7J,EAAM6J,OAAZ,CAAmB,CAACjJ,GAAIC,eAAMG,QAASoK,EAAStB,WAAY,OAGzE,KAAKN,GACD,IAAM4B,EAAUlK,EAAOkK,QACvB,OAAO,2BACApL,GADP,IAEI6J,MAAM,GAAD,mBAAM7J,EAAM6J,OAAZ,CAAmB,CAACjJ,GAAIC,eAAMG,QAASoK,EAAStB,WAAY,OAGzE,KAAKL,GAED,OAAO,2BACAzJ,GADP,IAEI8E,QAAS5D,EAAO4D,UAGxB,KAAK4E,GACD,OAAO,2BACA1J,GADP,IAEIwE,OAAQtD,EAAOsD,SAGvB,KAAKmF,GACD,OAAO,2BACA3J,GADP,IAEI6J,MAAO7J,EAAM6J,MAAM1C,QAAO,SAAAC,GAAC,OAAIA,EAAExG,KAAOM,EAAOoP,YAGvD,KAAK1G,GACD,OAAyB,OAAlB5J,EAAM8E,QAAN,2BACG9E,GADH,IACU8E,QAAQ,2BAAK9E,EAAM8E,SAAZ,IAAqB0C,OAAO,2BAAKxH,EAAM8E,QAAQ0C,QAApB,IAA4BC,MAAOvG,EAAOqG,YADtF,eAEGvH,GAEd,QACI,OAAOA,IkBpDfuQ,YAAatP,KACb0B,QDJ0B,WAAqF,IAApF3C,EAAmF,uDAAzDU,GAAcQ,EAA2C,uCAGtG,OAFAA,EAAOC,KAEAnB,GCEfiI,U3BOwB,WAA0F,IAAzFjI,EAAwF,uDAA9DU,EAAcQ,EAAgD,uCACjH,OAAQA,EAAOC,MACX,KAAKgE,EACD,OAAO,2BACAnF,GADP,IAEI0F,MAAO1F,EAAM0F,MAAMxC,KAAI,SAAAgF,GACnB,OAAIA,EAAEtH,KAAOM,EAAOqD,OACT,2BAAI2D,GAAX,IAAcP,UAAU,IAErBO,OAGnB,KAAK9C,EACD,OAAO,2BACApF,GADP,IAEI0F,MAAO1F,EAAM0F,MAAMxC,KAAI,SAAAgF,GACnB,OAAIA,EAAEtH,KAAOM,EAAOqD,OACT,2BAAI2D,GAAX,IAAcP,UAAU,IAErBO,OAGnB,KAAK7C,EACD,OAAO,2BACArF,GADP,IACc0F,MAAM,YAAKxE,EAAOwE,SAEpC,KAAKJ,EACD,OAAO,2BACAtF,GADP,IACciE,YAAa/C,EAAO+C,cAEtC,KAAKsB,EACD,OAAO,2BACAvF,GADP,IACc2F,WAAYzE,EAAOyE,aAErC,KAAKH,EACD,OAAO,2BACAxF,GADP,IACc4F,WAAY1E,EAAO0E,aAErC,KAAKH,EACD,OAAO,2BACAzF,GADP,IAEI8F,oBAAqB5E,EAAO0E,WAAP,sBACX5F,EAAM8F,qBADK,CACgB5E,EAAOqD,SACtCvE,EAAM8F,oBAAoBqB,QAAO,SAAAvG,GAAE,OAAIA,IAAOM,EAAOqD,YAEnE,QACI,OAAOvE,I2BpDfE,KNCuB,WAAyF,IAAxFF,EAAuF,uDAA7DU,GAAcQ,EAA+C,uCAC/G,OAAQA,EAAOC,MACX,KAAKqO,GACD,OAAO,2BACAxP,GACAkB,EAAOwO,SAElB,KAAKlK,GACD,OAAO,2BACAxF,GADP,IACc4F,WAAY1E,EAAO0E,aAErC,QACI,OAAO5F,IMZf8K,KAAM0F,KACNC,IFRsB,WAAwF,IAAvFzQ,EAAsF,uDAA5DU,GAAcQ,EAA8C,uCAC7G,OAAQA,EAAOC,MACX,KAAK+O,GACD,OAAO,2BACAlQ,GADP,IAEImQ,cAAejP,EAAOiP,gBAE9B,QACI,OAAOnQ,MEqBb0Q,GAAmBC,OAAOC,kCAAoC3H,KACvD4H,GAAQC,aAAYV,GAAaM,GAAiBK,aAAgBC,QCxB/E,IAAMC,GAAmBzO,IAAM0O,MAAK,kBAAM,iCAYpCC,G,uKAEF,WACIrI,KAAKxI,MAAM8Q,kB,oBAGf,WACI,OAAItI,KAAKxI,MAAM+Q,YAKX,sBAAKtP,UAAU,cAAf,UACI,cAAC8N,GAAD,IACA,cAACpM,EAAD,IACA,sBAAK1B,UAAU,sBAAf,UACI,cAAC,IAAD,CAAOuP,KAAK,oBAAoBC,OAAQ,kBAAM,cAAC,GAAD,OAC9C,cAAC,IAAD,CAAOD,KAAK,WAAW7G,WC5CXrK,ED4CmC6Q,GC3CxD,SAAC1Q,GACR,OAAO,cAAC,IAAMiR,SAAP,CAAgBC,SAAU,cAAC,GAAD,IAA1B,SACH,cAACrR,EAAD,eAAeG,UD0CH,cAAC,IAAD,CAAO+Q,KAAK,QAAQ7G,UAAWrI,IAC/B,cAAC,IAAD,CAAOkP,KAAK,WAAW7G,UAAW,kBAAM,cAACzB,GAAD,OACxC,cAAC,IAAD,CAAOsI,KAAK,SAAS7G,UAAWpI,IAChC,cAAC,IAAD,CAAOiP,KAAK,YAAY7G,UAAWnI,IACnC,cAAC,IAAD,CAAOgP,KAAK,SAAS7G,UAAWuF,WAdjC,cAAC,GAAD,ICnCZ,IAAyB5P,M,GD2BdoC,IAAMuG,eAoCpB2I,GAAczI,aACdiG,IACA7O,aARoB,SAACL,GACrB,MAAO,CACJqR,YAAarR,EAAMyQ,IAAIN,iBAMA,CAACiB,cH/BF,WACzB,OAAO,SAAClI,GACJ,IAAIyI,EAAUzI,EAASyG,MACvBX,QAAQ4C,IAAI,CAACD,IACR5D,MAAK,WACF7E,EAXL,CACH/H,KAAM+O,GAAiBC,eAUW,OAE7B0B,OAAM,SAAA/P,GACHgQ,QAAQC,KAAKjQ,UGqBXmH,CAE8BkI,IAYjCa,GAVI,WACf,OACI,cAAC,IAAD,UACI,cAAC,IAAD,CAAUnB,MAAOA,GAAjB,SACI,cAACa,GAAD,SErEhBO,IAASV,OACD,cAAC,IAAMW,WAAP,UACI,cAAC,GAAD,MAEJC,SAASC,eAAe,U,gCCThC,oEAAO,IAAMzH,EAAW,SAACwB,GACrB,IAAIA,EACJ,MAAO,qBAIEhC,EAAkB,SAACkI,GAAD,OAAuB,SAAClG,GACnD,GAAIA,EAAMuB,OAAS2E,EAAW,MAAM,iBAAN,OAAwBA,EAAxB,e,mBCPlC/Q,EAAOC,QAAU,CAAC,YAAc,mCAAmC,MAAQ,6BAA6B,iBAAmB,0C,mBCA3HD,EAAOC,QAAU,CAAC,iBAAmB,sCAAsC,UAAY,+BAA+B,YAAc,mC,mBCApID,EAAOC,QAAU,CAAC,KAAO,wBAAwB,YAAc,iC,mBCA/DD,EAAOC,QAAU,CAAC,WAAa,4BAA4B,MAAQ,uBAAuB,MAAQ,uBAAuB,aAAe,gC,mBCAxID,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,8B","file":"static/js/main.67ac7f13.chunk.js","sourcesContent":["import React, {ComponentType} from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\n\r\ntype mapStateToPropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStateToPropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n\r\n    const RedirectComponent = (props: mapStateToPropsType) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Redirect to={'/login'}/>\r\n        return <Component {...restProps as T}/>\r\n    }\r\n    return connect(mapStateToProps)(RedirectComponent)\r\n}","import {v1} from 'uuid';\r\n\r\n//Const\r\nconst ADD_MESSAGE = 'SOCIAL_NETWORK/DIALOGS/ADD-MESSAGE';\r\n\r\n//State\r\nlet initialState = {\r\n    dialogs: [\r\n        {id: v1(), name: 'Dmitry'},\r\n        {id: v1(), name: 'Petr'},\r\n        {id: v1(), name: 'Andrey'},\r\n        {id: v1(), name: 'Alena'},\r\n        {id: v1(), name: 'Nastia'}\r\n    ] as Array<dialogsType>,\r\n    messages: [\r\n        {id: v1(), message: 'Hi!'},\r\n        {id: v1(), message: 'Hi!'},\r\n        {id: v1(), message: 'How a you?'},\r\n        {id: v1(), message: 'Good!'},\r\n        {id: v1(), message: 'What do you do?'}\r\n    ] as Array<messagesType>\r\n}\r\n\r\n//Reducer\r\nexport const dialogsReducer = (state: InitialStateType = initialState, action: DialogsActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE: {\r\n            const newMessage = action.newMessage;\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {id: v1(), message: newMessage}]\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//Action type\r\ntype AddMessageActionType = ReturnType<typeof AddMessage>\r\n\r\nexport type DialogsActionsTypes = AddMessageActionType\r\n\r\n//Action creator\r\nexport const AddMessage= (newMessage: string) => {\r\n    return {\r\n        type: ADD_MESSAGE, newMessage\r\n    } as const\r\n}\r\n\r\n//Type\r\nexport type InitialStateType = typeof initialState;\r\n\r\nexport type messagesType = {\r\n    id: string\r\n    message: string\r\n}\r\nexport type dialogsType = {\r\n    id: string\r\n    name: string\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"NavBar_nav__xcy83\",\"item\":\"NavBar_item__1XSqw\",\"activeLink\":\"NavBar_activeLink__302B2\",\"friends\":\"NavBar_friends__3FnqL\",\"imgFriend\":\"NavBar_imgFriend__2GIfy\",\"nameFriend\":\"NavBar_nameFriend__sCgLs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Users_dialogs__3rb7s\",\"dialog\":\"Users_dialog__1RBB1\",\"photo\":\"Users_photo__18Ulb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__ARoXA\"};","import React from \"react\";\r\nimport {WrappedFieldProps} from \"redux-form\";\r\nimport s from './FormsControls.module.css'\r\n\r\n\r\nexport const FormControl: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, children, ...restProps} = props\r\n\r\n    const hasError = meta.touched && meta.error\r\n    return (\r\n        <div className={`${s.formControl} + ' ' + ${hasError ? s.error : ''}`}>\r\n            <div>\r\n                {props.children}\r\n            </div>\r\n            <div>\r\n                {hasError && <span>{meta.error}</span>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, children, ...restProps} = props\r\n    return (\r\n       <FormControl {...props}><textarea {...input} {...restProps}/></FormControl>\r\n    )\r\n}\r\n\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, children, ...restProps} = props\r\n    return (\r\n        <FormControl {...props}><input {...input} {...restProps}/></FormControl>\r\n    )\r\n}\r\n\r\n","import React from \"react\";\r\n\r\n\r\nconst News = () => {\r\n    return (<div>News</div>)\r\n}\r\n\r\nexport default News;","import React from \"react\";\r\n\r\n\r\nconst Music = () => {\r\n\r\n    return (<div>\r\n            Music\r\n            </div>)\r\n}\r\n\r\nexport default Music;","import React from \"react\";\r\ntype settingsPropsType={\r\n\r\n}\r\n\r\nexport const Settings = (props: settingsPropsType) => {\r\n    return (<div>\r\n            Settings\r\n        </div>)\r\n}\r\n","import React from 'react';\r\nimport s from './NavBar.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {NavBarPropsType} from \"./NavBarContainer\";\r\n\r\nconst Navbar: React.FC <NavBarPropsType> =React.memo(props=> {\r\n    const friendsArray = props.sideBar.friends;\r\n    return (\r\n        <nav className={s.nav}>\r\n        <div className={s.item}>\r\n        <NavLink to={\"/profile\"} activeClassName={s.activeLink}>Profile</NavLink>\r\n        </div>\r\n        <div className={`${s.item} ${s.active}`}>\r\n    <NavLink to=\"/dialogs\" activeClassName={s.activeLink}>Messages</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n    <NavLink to=\"/news\" activeClassName={s.activeLink}>News</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n    <NavLink to=\"/music\" activeClassName={s.activeLink}>Music</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n    <NavLink to=\"/settings\" activeClassName={s.activeLink}>Settings</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n    <NavLink to=\"/friends\" activeClassName={s.activeLink}>Friends</NavLink>\r\n        <div className={s.friends}>\r\n        {friendsArray.map((friedItem, index) =>\r\n                <p key={index}>\r\n                <span className={s.imgFriend}>\r\n                <img src=\"https://dthezntil550i.cloudfront.net/kg/latest/kg1802132010216500004834729/1280_960/557d644f-12f3-49e1-bb66-23c16400540d.png\" alt=\"friend\"/>\r\n            </span>\r\n            <span className={s.nameFriend}>\r\n            <NavLink to={\"/friend/\"+ friedItem.id} activeClassName={s.activeLink}>{friedItem.name}</NavLink>\r\n            </span>\r\n            </p>\r\n)}\r\n    </div>\r\n    </div>\r\n    </nav>\r\n)\r\n})\r\n\r\nexport default Navbar;\r\n\r\n\r\n","import {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport Navbar from \"./NavBar\";\r\nimport {InitialStateType} from \"../../redux/sideBar-reducer\";\r\n\r\ntype friendsType = {\r\n    id: string\r\n    name: string\r\n}\r\ntype sideBarType = {\r\n    friends: Array<friendsType>\r\n}\r\nexport type NavBarPropsType = {\r\n    sideBar: sideBarType\r\n}\r\n\r\ntype mapStatePropsType = {\r\n    sideBar: InitialStateType\r\n}\r\n/*type mapDispatchPropsType = {}*/\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        sideBar: state.sideBar\r\n    }\r\n}\r\n\r\n/*let mapDispatchToProps = (dispatch: Dispatch): mapDispatchPropsType => {\r\n    return {}\r\n}*/\r\n\r\nexport const NavbarContainer = connect(mapToStateToProps, {})(Navbar)\r\n\r\n","import axios from 'axios';\r\nimport {ProfileType} from '../redux/profile-reducer';\r\nimport {UserPageType} from '../redux/users-reducer';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    headers: {\r\n        'API-KEY': 'abbdd15d-25c5-489b-bf41-880fe8431dc9'\r\n    },\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number, pageSize: number) {\r\n        return instance.get<UserPageType>(`users?page=${currentPage}&count=${pageSize}`)\r\n    },\r\n    followUsers(id: number) {\r\n        return instance.post<responseType<dataType>>(`follow/${id}`, {})\r\n    },\r\n    unFollowUsers(id: number) {\r\n        return instance.delete<responseType<{}>>(`follow/${id}`, {})\r\n    },\r\n}\r\n\r\nexport const profileAPI={\r\n    getProfilePage(userId: string) {\r\n        return instance.get<ProfileType>(`profile/${userId}`)\r\n    },\r\n    getStatus(userId: string) {\r\n        return instance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<responseType<{}>>(`profile/status`, {status: status})\r\n    },\r\n    savePhoto(image: File) {\r\n        const formData = new FormData()\r\n        formData.append('image', image)\r\n        return instance.put<responseType<{photos: {small: string, large: string}}>>('/profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put<responseType<{}>>('profile', profile)\r\n    },\r\n}\r\n\r\nexport const authAPI={\r\n    me() {\r\n        return instance.get<responseType<dataType>>(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean) {\r\n        return instance.post<responseType<{userId: number}>>(`auth/login`, {email, password, rememberMe})\r\n    },\r\n    logout() {\r\n        return instance.delete<responseType<{}>>(`auth/login`)\r\n    }\r\n}\r\n\r\n//Type\r\ntype responseType<D> = {\r\n    resultCode: number\r\n    messages: Array<string>\r\n    data: D\r\n}\r\n\r\ntype dataType= {\r\n    id: number\r\n    email: string\r\n    login: string\r\n}","import {usersAPI} from '../API/api';\r\nimport {AppStateType, AppThunkType} from './redux-store';\r\nimport {ThunkDispatch} from 'redux-thunk';\r\n\r\n//Const\r\nconst FOLLOW = 'SOCIAL_NETWORK/PROFILE/FOLLOW';\r\nconst UNFOLLOW = 'SOCIAL_NETWORK/PROFILE/UNFOLLOW';\r\nconst SET_USERS = 'SOCIAL_NETWORK/PROFILE/SET_USERS';\r\nconst SET_CURRENT_PAGE = 'SOCIAL_NETWORK/PROFILE/SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SOCIAL_NETWORK/PROFILE/SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'SOCIAL_NETWORK/PROFILE/TOGGLE_IS_FETCHING';\r\nconst TOGGLE_FOLLOWING_IN_PROGRESS = 'SOCIAL_NETWORK/PROFILE/TOGGLE_FOLLOWING_IN_PROGRESS';\r\n\r\n//State\r\nexport let initialState = {\r\n    items: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    startPage: 1,\r\n    followingInProgress: [] as Array<number>\r\n}\r\n\r\n//Reducer\r\nexport const usersReducer = (state: InitialStateType = initialState, action: UsersActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                items: state.items.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                items: state.items.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state, items: [...action.items]\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state, currentPage: action.currentPage\r\n            }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state, totalCount: action.totalCount\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state, isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_FOLLOWING_IN_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//Action type\r\ntype followActionType = ReturnType<typeof follow>\r\ntype unFollowActionType = ReturnType<typeof unFollow>\r\ntype setUsersActionType = ReturnType<typeof setUsers>\r\ntype setCurrentPageActionType = ReturnType<typeof setCurrentPage>\r\ntype setTotalUsersCountActionType = ReturnType<typeof setTotalUsersCount>\r\ntype toggleIsFetchingActionType = ReturnType<typeof toggleIsFetching>\r\ntype toggleIsFollowingInProgressActionType = ReturnType<typeof toggleIsFollowingInProgress>\r\n\r\nexport type UsersActionsTypes = followActionType | unFollowActionType | setUsersActionType |\r\n    setCurrentPageActionType | setTotalUsersCountActionType | toggleIsFetchingActionType |\r\n    toggleIsFollowingInProgressActionType\r\n\r\n//Action creator\r\nexport const follow = (userId: number) => {\r\n    return {\r\n        type: FOLLOW, userId\r\n    } as const\r\n}\r\n\r\nexport const unFollow = (userId: number) => {\r\n    return {\r\n        type: UNFOLLOW, userId\r\n    } as const\r\n}\r\n\r\nexport const setUsers = (items: Array<UserType>) => {\r\n    return {\r\n        type: SET_USERS, items\r\n    } as const\r\n}\r\nexport const setTotalUsersCount = (totalCount: number) => {\r\n    return {\r\n        type: SET_TOTAL_USERS_COUNT, totalCount\r\n    } as const\r\n}\r\nexport const setCurrentPage = (currentPage: number) => {\r\n    return {\r\n        type: SET_CURRENT_PAGE, currentPage\r\n    } as const\r\n}\r\nexport const toggleIsFetching = (isFetching: boolean) => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING, isFetching\r\n    } as const\r\n}\r\nexport const toggleIsFollowingInProgress = (userId: number, isFetching: boolean) => {\r\n    return {\r\n        type: TOGGLE_FOLLOWING_IN_PROGRESS, userId, isFetching\r\n    } as const\r\n}\r\n\r\n\r\n//Thunk creator\r\nexport const requestUsersTC = (currentPage: number, pageSize: number): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, UsersActionsTypes>) => {\r\n        dispatch(toggleIsFetching(true));\r\n        const response= await usersAPI.getUsers(currentPage, pageSize)\r\n            dispatch(toggleIsFetching(false));\r\n            dispatch(setUsers(response.data.items));\r\n            dispatch(setTotalUsersCount(response.data.totalCount));\r\n            dispatch(setCurrentPage(currentPage))\r\n    }\r\n}\r\n\r\nexport const followTC = (userId: number): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, UsersActionsTypes>) => {\r\n        dispatch(toggleIsFollowingInProgress(userId, true))\r\n        const response= await usersAPI.followUsers(userId)\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(follow(userId))\r\n            }\r\n            dispatch(toggleIsFollowingInProgress(userId, false))\r\n        }\r\n}\r\n\r\nexport const unFollowTC = (userId: number): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, UsersActionsTypes>) => {\r\n        dispatch(toggleIsFollowingInProgress(userId, true))\r\n        const response= await usersAPI.unFollowUsers(userId)\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(unFollow(userId))\r\n            }\r\n            dispatch(toggleIsFollowingInProgress(userId, false))\r\n    }\r\n}\r\n\r\n//Type\r\nexport type InitialStateType = typeof initialState;\r\n\r\ntype PhotoType = {\r\n    small: null | string\r\n    large: null | string\r\n}\r\n\r\nexport type UserType = {\r\n    name: string\r\n    id: number\r\n    uniqueUrlName: null | string\r\n    photos: PhotoType\r\n    status: null | string\r\n    followed: boolean\r\n}\r\n\r\nexport type UserPageType = {\r\n    items: Array<UserType>\r\n    pageSize: number\r\n    totalCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    startPage: number\r\n    followingInProgress: Array<number>\r\n}\r\n","import React, {useState} from 'react';\r\nimport s from './Paginator.module.css'\r\n\r\ntype paginatorPropsType = {\r\n    onPageChanged: (pageNumber: number) => void\r\n    currentPage: number\r\n    totalCount: number\r\n    pageSize: number\r\n}\r\n\r\nexport const Paginator = React.memo((props: paginatorPropsType) => {\r\n    let portionSize = 30;\r\n    let pagesCount = Math.ceil(props.totalCount / props.pageSize)\r\n    let pages = [] as Array<number>\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    let portionCount = Math.ceil(pagesCount / portionSize)\r\n    const [portionNumber, setPortionNumber] = useState(1)\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n    return (\r\n        <div className={s.page}>\r\n            {portionNumber > 1 &&\r\n            <button onClick={()=> {setPortionNumber(portionNumber - 1)}}>PR</button>}\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map((p) => {\r\n                    return <span\r\n                        className={props.currentPage === p ? s.currentPage : ''}\r\n                                 key={p}\r\n                                 onClick={() => {\r\n                                     props.onPageChanged(p)\r\n                                 }}>{p}</span>\r\n                })}\r\n            {portionCount > portionNumber &&\r\n            <button onClick={()=> {setPortionNumber(portionNumber + 1)}}>Next</button>}\r\n        </div>\r\n    )\r\n})\r\n","export default __webpack_public_path__ + \"static/media/user.8415df19.png\";","import React from 'react';\r\nimport s from './Users.module.css'\r\nimport userPhoto from '../../assets/images/user.png'\r\nimport {UserType} from '../../redux/users-reducer';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype UserPropsType = {\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void\r\n    followingInProgress: Array<number>\r\n    items: UserType\r\n}\r\n\r\n\r\nexport const User = React.memo((props: UserPropsType) => {\r\ndebugger\r\n    return (<div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={`/profile/${props.items.id}`}>\r\n                    <img alt={'avatar'} className={s.photo} src={props.items.photos.small !== null ? props.items.photos.small : userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {props.items.followed\r\n                        ? <button disabled={props.followingInProgress.some(id => id === props.items.id)} onClick={() => {\r\n                            props.unFollowTC(props.items.id)\r\n                        }}>UNFOLLOW</button> :\r\n                        <button disabled={props.followingInProgress.some(id => id === props.items.id)} onClick={() => {\r\n                            props.followTC(props.items.id)\r\n                        }}>FOLLOW</button>}\r\n                </div>\r\n            </span>\r\n        <span>\r\n                <span>\r\n                    <div>{props.items.name} {'u.surname'}</div>\r\n                    <div>{props.items.status !== null ? props.items.status : 'not status'}</div>\r\n                </span>\r\n                <span>\r\n                    <div>{'u.location.country'}</div>\r\n                    <div>{'u.location.city'}</div>\r\n                </span>\r\n            </span>\r\n    </div>)\r\n})\r\n","import React from 'react';\r\nimport {UserType} from '../../redux/users-reducer';\r\nimport {Paginator} from \"../../common/Paginator/Paginator\";\r\nimport {User} from \"./User\";\r\n\r\ntype UsersPropsType = {\r\n    totalCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    usersPage: Array<UserType>\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void\r\n    onPageChanged: (pageNumber: number) => void\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nexport const Users = React.memo((props: UsersPropsType) => {\r\n\r\n\r\n    return (<div>\r\n        <Paginator totalCount={props.totalCount} pageSize={props.pageSize}\r\n                   onPageChanged={props.onPageChanged} currentPage={props.currentPage}/>\r\n        <div>\r\n            {\r\n                props.usersPage.map(u => <User key={u.id} items={u}\r\n                                               followingInProgress={props.followingInProgress}\r\n                                               followTC={props.followTC} unFollowTC={props.unFollowTC}/>)\r\n            }\r\n        </div>\r\n    </div>)\r\n})\r\n","export default __webpack_public_path__ + \"static/media/loading.96080287.svg\";","import React from 'react';\r\nimport loading from '../../assets/images/loading.svg'\r\n\r\n\r\nexport const Preloader = () => {\r\n    return (<div>\r\n        <img alt={'LOADING, PLEASE WAIT'} src={loading} />\r\n    </div>)\r\n}","import {AppStateType} from './redux-store';\r\n\r\nexport const getUsers= (state: AppStateType)=>{\r\n    return state.usersPage.items\r\n}\r\n\r\nexport const getPageSize= (state: AppStateType)=>{\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalCount= (state: AppStateType)=>{\r\n    return state.usersPage.totalCount\r\n}\r\n\r\nexport const getCurrentPage= (state: AppStateType)=>{\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching= (state: AppStateType)=>{\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress= (state: AppStateType)=>{\r\n    return state.usersPage.followingInProgress\r\n}\r\n\r\n","import {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {followTC, requestUsersTC, setCurrentPage, toggleIsFollowingInProgress, unFollowTC, UserType} from '../../redux/users-reducer';\r\nimport {Users} from './Users';\r\nimport React from 'react';\r\nimport {Preloader} from '../../common/Preloader/Preloader';\r\nimport {compose} from 'redux';\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize, getTotalCount,\r\n    getUsers\r\n} from '../../redux/users-selectors';\r\n\r\n\r\nexport type mapStatePropsType = {\r\n    usersPage: Array<UserType>\r\n    pageSize: number\r\n    totalCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nexport type UsersContainerComponentPropsType = mapStatePropsType & mapDispatchPropsType;\r\n\r\n\r\nexport type mapDispatchPropsType = {\r\n    followTC: (userId: number) => void\r\n    unFollowTC: (userId: number) => void\r\n    getUsersTC: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\nclass UsersContainerComponent extends React.PureComponent<UsersContainerComponentPropsType> {\r\n\r\n    componentDidMount() {\r\n        const {currentPage, pageSize}= this.props;\r\n        this.props.getUsersTC(currentPage, pageSize);\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        const {pageSize}= this.props;\r\n        this.props.getUsersTC(pageNumber, pageSize);\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users totalCount={this.props.totalCount}\r\n                   pageSize={this.props.pageSize}\r\n                   currentPage={this.props.currentPage}\r\n                   usersPage={this.props.usersPage}\r\n                   followTC={this.props.followTC}\r\n                   unFollowTC={this.props.unFollowTC}\r\n                   onPageChanged={this.onPageChanged}\r\n                   followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        usersPage: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalCount: getTotalCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\nexport const UsersContainer= compose<React.ComponentType>(\r\n    connect(mapToStateToProps, {followTC, unFollowTC, setCurrentPage, toggleIsFollowingInProgress, getUsersTC: requestUsersTC})\r\n)(UsersContainerComponent)\r\n\r\n\r\n","import {v1} from 'uuid';\r\nimport {ThunkDispatch} from 'redux-thunk';\r\nimport {AppStateType, AppThunkType} from './redux-store';\r\nimport {profileAPI} from '../API/api';\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\n//Const\r\nconst ADD_POST = 'SOCIAL_NETWORK/PROFILE/ADD-POST';\r\nconst ON_KEY_PRESS_HANDLER = 'SOCIAL_NETWORK/PROFILE/ON_KEY_PRESS_HANDLER';\r\nconst SET_USER_PROFILE = 'SOCIAL_NETWORK/PROFILE/SET_USER_PROFILE';\r\nconst SET_STATUS = 'SOCIAL_NETWORK/PROFILE/SET_STATUS';\r\nconst REMOVE_POST = 'SOCIAL_NETWORK/PROFILE/REMOVE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'SOCIAL_NETWORK/PROFILE/SAVE_PHOTO_SUCCESS';\r\nconst SAVE_PROFILE = 'SAVE_PROFILE';\r\n\r\n//State\r\nlet initialState = {\r\n    status: '',\r\n    posts: [\r\n        {id: v1(), message: 'Hi, how a you?', likesCount: 12},\r\n        {id: v1(), message: \"It's my first post.\", likesCount: 22}\r\n    ] as Array<postsType>,\r\n    profile: null as ProfileType | null,\r\n    isFetching: false\r\n}\r\n\r\n//Reducer\r\nexport const profileReducer = (state: initialStateType = initialState, action: ProfileActionsTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            const newPost = action.newPost;\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {id: v1(), message: newPost, likesCount: 0}]\r\n            }\r\n        }\r\n        case ON_KEY_PRESS_HANDLER: {\r\n            const newPost = action.newPost;\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {id: v1(), message: newPost, likesCount: 0}],\r\n            }\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            debugger\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case REMOVE_POST: {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id !== action.postId)\r\n            }\r\n        }\r\n        case SAVE_PHOTO_SUCCESS: {\r\n            return state.profile !== null\r\n                ? {...state, profile: {...state.profile, photos: {...state.profile.photos, small: action.photo}}}\r\n                : {...state}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//Action type\r\ntype AddPostActionType = ReturnType<typeof AddPost>\r\ntype onKeyPressHandlerActionType = ReturnType<typeof onKeyPressHandler>\r\ntype setUserProfileActionType = ReturnType<typeof setUserProfile>\r\ntype setStatusActionType = ReturnType<typeof setStatus>\r\ntype removePostActionType = ReturnType<typeof removePost>\r\ntype savePhotoSuccessActionType = ReturnType<typeof savePhotoSuccess>\r\n\r\nexport type ProfileActionsTypes =\r\n    AddPostActionType\r\n    | onKeyPressHandlerActionType\r\n    | setUserProfileActionType\r\n    | setStatusActionType\r\n    | removePostActionType\r\n    | savePhotoSuccessActionType\r\n\r\ntype StopSubmitActionsType = ReturnType<typeof stopSubmit>\r\n\r\n//Action creator\r\nexport const AddPost = (newPost: string) => {\r\n    return {\r\n        type: ADD_POST, newPost\r\n    } as const\r\n}\r\n\r\nexport const onKeyPressHandler = (newPost: string) => {\r\n    return {\r\n        type: ON_KEY_PRESS_HANDLER, newPost: newPost\r\n    } as const\r\n}\r\nexport const setUserProfile = (profile: ProfileType) => {\r\n    return {\r\n        type: SET_USER_PROFILE, profile: profile\r\n    } as const\r\n}\r\n\r\nexport const setStatus = (status: string) => {\r\n    return {\r\n        type: SET_STATUS, status\r\n    } as const\r\n}\r\n\r\nexport const removePost = (postId: string) => {\r\n    return {\r\n        type: REMOVE_POST, postId\r\n    } as const\r\n}\r\n\r\n\r\nexport const savePhotoSuccess = (photo: string) => {\r\n    return {\r\n        type: SAVE_PHOTO_SUCCESS, photo\r\n    } as const\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileType) => {\r\n    return {\r\n        type: SAVE_PROFILE, profile\r\n    } as const\r\n}\r\n\r\n//Thunk creator\r\nexport const getUserPageTC = (userId: string): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, ProfileActionsTypes>) => {\r\n        const response = await profileAPI.getProfilePage(userId)\r\n        dispatch(setUserProfile(response.data));\r\n    }\r\n}\r\n\r\nexport const getStatusTC = (userId: string): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, ProfileActionsTypes>) => {\r\n        const response = await profileAPI.getStatus(userId)\r\n        dispatch(setStatus(response.data));\r\n    }\r\n}\r\n\r\nexport const updateStatusTC = (status: string): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, ProfileActionsTypes>) => {\r\n        const response = await profileAPI.updateStatus(status)\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setStatus(status));\r\n        }\r\n    }\r\n}\r\n\r\nexport const savePhotoTC = (image: File): AppThunkType => async (dispatch) => {\r\n    const response = await profileAPI.savePhoto(image)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos.small))\r\n    }\r\n}\r\n\r\nexport const saveProfileTC = (profile: ProfileType): AppThunkType => async (dispatch: ThunkDispatch<AppStateType, unknown, ProfileActionsTypes | StopSubmitActionsType>, getState ) => {\r\n    const userId = getState().auth.id\r\n    debugger\r\n    const response = await profileAPI.saveProfile(profile)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserPageTC(userId.toString()))\r\n    } else {\r\n        dispatch(stopSubmit('edit-profile', {_error: response.data.messages[0]}))\r\n        return Promise.reject(response.data.messages[0])\r\n    }\r\n}\r\n\r\n//Type\r\nexport type initialStateType = typeof initialState\r\n\r\n\r\nexport type postsType = {\r\n    id: string\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\nexport type PhotoType = {\r\n    small: string\r\n    large: string\r\n}\r\n\r\ntype contactsType = {\r\n    facebook: string | null\r\n    website: string | null\r\n    vk: string | null\r\n    twitter: string | null\r\n    instagram: string | null\r\n    youtube: string | null\r\n    github: string | null\r\n    mainLink: string | null\r\n}\r\n\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    contacts: contactsType\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    userId: string\r\n    photos: PhotoType\r\n}\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport s from './Post.module.css';\r\n\r\ntype PostPropsType = {\r\n    id?: string\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\nexport const Post = React.memo((props: PostPropsType) => {\r\n    return <div className={s.item}>\r\n        <img alt={'user avatar'}\r\n            src='data:image/jpeg;base64,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'/>\r\n        {props.message}\r\n        <div>\r\n            <span>Likes {props.likesCount}</span>\r\n        </div>\r\n    </div>\r\n})\r\n","import React from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {maxLengthCreator, required} from '../../../utils/validators/validators';\r\nimport {Textarea} from '../../../common/FormsControls/FormsControls';\r\n\r\nexport type  FormDataType = {\r\n    newPost: string\r\n}\r\n\r\nconst maxValue= maxLengthCreator(50)\r\n\r\nexport const MyPostsForm = React.memo((props: InjectedFormProps<FormDataType>) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field placeholder={'Enter your message'} type=\"text\" name={'newPost'} component={Textarea} validate={[ required, maxValue ]}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Add post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n})\r\n\r\nexport const MyPostsReduxForm = React.memo(reduxForm<FormDataType>({form: 'ProfileNewPost'})(MyPostsForm))\r\n\r\n","import React from 'react';\r\nimport {Post} from './Post/Post';\r\nimport s from './MyPosts.module.css';\r\nimport {profilePageType} from './MyPostsContainer';\r\nimport {FormDataType, MyPostsReduxForm} from './MyPostsForm';\r\n\r\ntype MyPostsPropsType = {\r\n    AddPost: (newPost: string) => void\r\n    onKeyPressHandler: (newPost: string) => void\r\n    profilePage: profilePageType\r\n}\r\n\r\nexport const MyPosts: React.FC<MyPostsPropsType> = React.memo(props => {\r\n    let postsElements = props.profilePage.posts.map(p => <Post key={p.id} message={p.message}\r\n                                                               likesCount={p.likesCount}/>)\r\n\r\n    const onAddPost = (post: FormDataType) => {\r\n        props.AddPost(post.newPost)\r\n        post.newPost = ''\r\n    }\r\n\r\n    return <div className={s.postsBlock}>\r\n        <h3>My posts</h3>\r\n        <MyPostsReduxForm onSubmit={onAddPost}/>\r\n        <div className={s.posts}>\r\n            {postsElements}\r\n        </div>\r\n    </div>\r\n})\r\n\r\n\r\n\r\n","import {AddPost, initialStateType, onKeyPressHandler, postsType} from '../../../redux/profile-reducer';\r\nimport {AppStateType} from '../../../redux/redux-store';\r\nimport {connect} from 'react-redux';\r\nimport {MyPosts} from './MyPosts';\r\n\r\nexport type profilePageType = {\r\n    posts: Array<postsType>\r\n}\r\n\r\ntype mapStatePropsType = {\r\n    profilePage: initialStateType\r\n}\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        profilePage: state.profilePage\r\n    }\r\n}\r\n\r\nexport const MyPostsContainer = connect(mapToStateToProps, {AddPost, onKeyPressHandler})(MyPosts)\r\n\r\n","import React, {ChangeEvent, useEffect, useState} from 'react';\r\n\r\ntype ProfileStatusWithHooksPropsType = {\r\n    status: string\r\n    updateStatusTC: (status: string) => void\r\n    isOwner: boolean\r\n}\r\n\r\nexport const ProfileStatusWithHooks = React.memo((props: ProfileStatusWithHooksPropsType) => {\r\n\r\n    let [editMode, setEditMode] = useState<boolean>(false)\r\n    let [status, setStatus] = useState<string>(props.status)\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        props.isOwner && setEditMode(true)\r\n    }\r\n    const deactivateActivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatusTC(status)\r\n    }\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n                <span onDoubleClick={activateEditMode}><b>Status: </b>{props.status || 'No Status'}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div>\r\n                <input autoFocus onBlur={deactivateActivateEditMode} onChange={onStatusChange} value={status}/>\r\n            </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n})\r\n\r\n","import React from 'react';\r\nimport s from './ProfileInfo.module.css'\r\nimport {ProfileType} from '../../../redux/profile-reducer';\r\n\r\ntype ProfileDataPropsType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    goToEditMode: (editMode: boolean) => void\r\n}\r\n\r\nexport const ProfileData = React.memo((props: ProfileDataPropsType) => {\r\n\r\n    return (\r\n        <div className={s.descriptionBlock}>\r\n        {props.isOwner && <div>\r\n            <button onClick={() => props.goToEditMode(true)}>Edit</button>\r\n        </div>}\r\n        <div>\r\n            <b>Full name:</b> {props.profile.fullName}\r\n        </div>\r\n        <div>\r\n            <b>Looking for a job:</b> {props.profile.lookingForAJob ? 'Yes' : 'No'}\r\n        </div>\r\n        {props.profile.lookingForAJob &&\r\n        <div>\r\n            <b>My skills:</b> {props.profile.lookingForAJobDescription}\r\n        </div>}\r\n        <div>\r\n            <b>About me:</b> {props.profile.aboutMe}\r\n        </div>\r\n        <div>\r\n            <b>Contacts:</b> {Object.entries(props.profile.contacts).map(([key, value]) => {\r\n            return <Contact key={key} contactName={key} contactValue={value}/>\r\n        })}\r\n        </div>\r\n    </div>)\r\n})\r\n\r\ntype ContactPropsType = {\r\n    contactName: string\r\n    contactValue: string | null\r\n}\r\n\r\nexport const Contact = (props: ContactPropsType) => {\r\n    return (\r\n        <div className={s.contactForm}>\r\n            <b>{props.contactName}:</b> {props.contactValue}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport {ProfileType} from '../../../redux/profile-reducer';\r\nimport {Field, Form, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input, Textarea} from \"../../../common/FormsControls/FormsControls\";\r\nimport s from \"../../../common/FormsControls/FormsControls.module.css\";\r\n\r\nexport type ProfileDataFormPropsType = {\r\n    profile: ProfileType\r\n    deactivateEditMode: (editMode: boolean) => void\r\n}\r\n\r\n\r\nexport const ProfileDataForm: React.FC<InjectedFormProps<ProfileType, ProfileDataFormPropsType> & ProfileDataFormPropsType> = ({handleSubmit, error, profile})=> {\r\n    return (\r\n        <Form onSubmit={handleSubmit}>\r\n            <div><button onClick={() => {}}>Save</button></div>\r\n            {\r\n                error &&\r\n                <div className={s.formSummaryError}>\r\n                    {error}\r\n                </div>\r\n            }\r\n            <div>\r\n                <b>Full name:</b> <Field type={\"text\"} placeholder={'Full name'} name={'fullName'} component={Input} />\r\n            </div>\r\n            <div>\r\n                <b>Looking for a job:</b> <Field type={\"checkbox\"} name={'lookingForAJob'} component={Input} />\r\n            </div>\r\n            <div>\r\n                <b>My skills:</b> <Field type={\"text\"} name={'lookingForAJobDescription'} component={Textarea} />\r\n            </div>\r\n            <div>\r\n                <b>About me:</b> <Field type={\"text\"} name={'aboutMe'} component={Textarea} />\r\n            </div>\r\n            <div>\r\n                <b>Contacts:</b> {Object.entries(profile.contacts).map(([key]) => {\r\n                return <div key={key}>\r\n                    <b> {key}: </b> <Field type={\"text\"} placeholder={key} name={'contacts.' + key} component={Input}/>\r\n                </div>\r\n            })}\r\n            </div>\r\n\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport const ProfileDataReduxForm = reduxForm<ProfileType, ProfileDataFormPropsType>({form: 'edit-profile'})(ProfileDataForm)\r\n","import React, {ChangeEvent, useState} from 'react';\r\nimport s from './ProfileInfo.module.css'\r\nimport userPhoto from '../../../assets/images/user.png'\r\nimport {ProfileType} from '../../../redux/profile-reducer';\r\nimport {Preloader} from '../../../common/Preloader/Preloader';\r\nimport {ProfileStatusWithHooks} from './ProfileStatusWithHooks';\r\nimport {ProfileData} from \"./ProfileData\";\r\nimport {ProfileDataReduxForm} from \"./ProfileDataForm\";\r\n\r\ntype profileInfoPropsType = {\r\n    profile: null | ProfileType\r\n    status: string\r\n    updateStatusTC: (status: string) => void\r\n    isOwner: boolean\r\n    savePhotoTC: (formData: File) => void\r\n    saveProfileTC: (profile: ProfileType)=> Promise<any>\r\n}\r\n\r\nexport const ProfileInfo = React.memo((props: profileInfoPropsType) => {\r\n    const [editMode, setEditMode] = useState(false)\r\n\r\n    const onSubmit = (profileForm: ProfileType) => {\r\n       props.saveProfileTC(profileForm).then(\r\n           () => setEditMode(false)\r\n       )\r\n    }\r\n\r\n    const deactivateEditMode = () => {\r\n\r\n    }\r\n\r\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files?.length) {\r\n            props.savePhotoTC(e.target.files[0])\r\n        }\r\n    }\r\n    if (!props.profile) {\r\n        return <Preloader/>\r\n    } else {\r\n        return <div>\r\n            <div className={s.descriptionBlock}>\r\n                <img className={s.mainPhoto} alt={'avatars'}\r\n                     src={props.profile.photos.small !== null ? props.profile.photos.small : userPhoto}/>\r\n                {props.isOwner && <input type={'file'} onChange={onMainPhotoSelected}/>}\r\n\r\n                <ProfileStatusWithHooks status={props.status} updateStatusTC={props.updateStatusTC}\r\n                                        isOwner={props.isOwner}/>\r\n                {editMode ? <ProfileDataReduxForm profile={props.profile} deactivateEditMode={deactivateEditMode} onSubmit={onSubmit} initialValues={props.profile}/> :\r\n                    <ProfileData profile={props.profile} isOwner={props.isOwner} goToEditMode={setEditMode}/>}\r\n            </div>\r\n        </div>\r\n    }\r\n})\r\n","import React from \"react\";\r\nimport {MyPostsContainer} from \"./MyPosts/MyPostsContainer\";\r\nimport {ProfileInfo} from \"./ProfileInfo/ProfileInfo\";\r\nimport {ProfilePropsType} from \"./ProfileContainer\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\n\r\nexport const Profile = React.memo((props: ProfilePropsType) => {\r\n    if (!props.isAuth){\r\n        return  <Redirect to={'/login'}/>\r\n    }\r\n    return (\r\n        <div>\r\n            <ProfileInfo profile={props.profile}\r\n                         status={props.status}\r\n                         updateStatusTC={props.updateStatusTC}\r\n                         isOwner={props.isOwner}\r\n                         savePhotoTC={props.savePhotoTC}\r\n                         saveProfileTC={props.saveProfileTC}/>\r\n            <MyPostsContainer/>\r\n        </div>\r\n    )\r\n})","import React from 'react';\r\nimport {Profile} from './Profile';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {\r\n    getStatusTC,\r\n    getUserPageTC,\r\n    ProfileType,\r\n    savePhotoTC,\r\n    saveProfileTC,\r\n    updateStatusTC\r\n} from '../../redux/profile-reducer';\r\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\n\r\n\r\ntype mapStatePropsType = {\r\n    profile: null | ProfileType\r\n    status: string\r\n    isAuth: boolean\r\n    authorizedUserId: number | null\r\n}\r\n\r\nexport type mapDispatchPropsType = {\r\n    getUserPageTC: (userId: string) => void\r\n    getStatusTC: (userId: string) => void\r\n    updateStatusTC: (status: string) => void\r\n    savePhotoTC: (formData: File) => void\r\n    saveProfileTC: (profile: ProfileType) => Promise<any>\r\n}\r\n\r\ntype userPropsType = {\r\n    userId: any\r\n}\r\n\r\nexport type ProfilePropsType = mapStatePropsType & mapDispatchPropsType & { isOwner: boolean };\r\n\r\nexport type PropsType = RouteComponentProps<userPropsType> & ProfilePropsType\r\n\r\n\r\nclass ProfileContainer extends React.PureComponent<PropsType> {\r\n\r\n    refreshProfile() {\r\n        let userId = this.props.match.params.userId\r\n        if (!userId) userId = this.props.authorizedUserId\r\n        if (!userId) this.props.history.push('login')\r\n        if (userId) {\r\n            this.props.getUserPageTC(userId)\r\n            this.props.getStatusTC(userId)\r\n        }\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<PropsType>, prevState: Readonly<any>, snapshot?: any): void {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Profile\r\n                {...this.props}\r\n                isOwner={!this.props.match.params.userId}\r\n                profile={this.props.profile}\r\n                status={this.props.status}\r\n                updateStatusTC={this.props.updateStatusTC}\r\n                isAuth={this.props.isAuth}\r\n                savePhotoTC={this.props.savePhotoTC}\r\n                saveProfileTC={this.props.saveProfileTC}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    isAuth: state.auth.isAuth,\r\n    authorizedUserId: state.auth.id\r\n})\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect,\r\n    connect(mapToStateToProps, {\r\n        getUserPageTC,\r\n        getStatusTC,\r\n        updateStatusTC,\r\n        savePhotoTC,\r\n        saveProfileTC,\r\n    }),\r\n    withRouter\r\n)(ProfileContainer)","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport s from './Header.module.css';\r\nimport {Preloader} from \"../../common/Preloader/Preloader\";\r\n\r\ntype HeaderPropsType = {\r\n    login: string | null,\r\n    isFetching: boolean\r\n    isAuth: boolean\r\n    logoutTC: ()=> void\r\n}\r\n\r\nconst Header = React.memo((props: HeaderPropsType) => {\r\n\r\n    return <header className={s.header}>\r\n        <img alt={'logo'} src='https://cdn.logo.com/hotlink-ok/logo-social.png'/>\r\n\r\n        <div className={s.loginBlock}>\r\n            {props.isFetching ? <Preloader/> : null}\r\n            {props.isAuth ?\r\n                <div> {props.login}  <button onClick={props.logoutTC}>LOG OUT</button> </div>\r\n                : <NavLink to={'/login'}> LOG IN  </NavLink>}\r\n        </div>\r\n    </header>;\r\n})\r\nexport default Header;","import {ThunkDispatch} from 'redux-thunk';\r\nimport {AppStateType, AppThunkType} from './redux-store';\r\nimport {authAPI} from '../API/api';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\n//Const\r\nconst SET_USER_DATA = 'SOCIAL_NETWORK/AUTH/SET_USER_DATA';\r\nconst TOGGLE_IS_FETCHING = 'SOCIAL_NETWORK/AUTH/TOGGLE_IS_FETCHING';\r\n\r\n//State\r\nlet initialState= {\r\n    id: 0 as number,\r\n    login: null as string | null,\r\n    email: null as string | null,\r\n    resultCode: 0,\r\n    isFetching: false,\r\n    isAuth: false\r\n}\r\n\r\n//Reducer\r\nexport const authReducer = (state: InitialStateType = initialState, action: AuthActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state, isFetching: action.isFetching\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//Action type\r\ntype setUserDataActionType = ReturnType<typeof setUserData>\r\ntype toggleIsFetchingActionType = ReturnType<typeof toggleIsFetching>\r\ntype StopSubmitActionsType = ReturnType<typeof stopSubmit>\r\n\r\nexport type AuthActionsTypes = setUserDataActionType | toggleIsFetchingActionType\r\n\r\n//Action creator\r\nexport const setUserData = (id: number, email: string | null, login: string | null, isAuth: boolean) => {\r\n    return {\r\n        type: SET_USER_DATA, payload: {id, email, login, isAuth}\r\n    } as const\r\n}\r\n\r\nexport const toggleIsFetching = (isFetching: boolean) => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING, isFetching: isFetching\r\n    } as const\r\n}\r\n\r\n//Thunk creator\r\nexport const getUserLoginTC = (): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, AuthActionsTypes>) => {\r\n        dispatch(toggleIsFetching(true))\r\n        const response= await authAPI.me()\r\n                if (response.data.resultCode === 0) {\r\n                    let {id, login, email} = response.data.data\r\n                    dispatch(setUserData(id, email, login, true))\r\n                }\r\n                dispatch(toggleIsFetching(false))\r\n    }\r\n}\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, AuthActionsTypes | StopSubmitActionsType>) => {\r\n        const response= await authAPI.login(email, password, rememberMe)\r\n                if (response.data.resultCode === 0) {\r\n                    dispatch(getUserLoginTC())\r\n                } else {\r\n                    let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Email or password is not correct'\r\n                    dispatch(stopSubmit('login', {_error: message}))\r\n                }\r\n    }\r\n}\r\n\r\nexport const logoutTC = (): AppThunkType => {\r\n    return async (dispatch: ThunkDispatch<AppStateType, unknown, AuthActionsTypes>) => {\r\n        const response= await authAPI.logout()\r\n                if (response.data.resultCode === 0) {\r\n                    dispatch(setUserData(0, null, null, false))\r\n                }\r\n    }\r\n}\r\n\r\n//Type\r\nexport type InitialStateType = typeof initialState\r\n","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {logoutTC} from \"../../redux/auth-reducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\n\r\nexport type mapStatePropsType = {\r\n    id: number | null,\r\n    email: string | null,\r\n    login: string | null,\r\n    isFetching: boolean,\r\n    isAuth: boolean\r\n}\r\n\r\nexport type mapDispatchPropsType = {\r\n    logoutTC: ()=> void\r\n}\r\n\r\nexport type UsersContainerComponentPropsType = mapStatePropsType & mapDispatchPropsType;\r\n\r\n\r\n\r\nclass HeaderContainerComponent extends React.Component<UsersContainerComponentPropsType> {\r\n\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        id: state.auth.id,\r\n        email: state.auth.email,\r\n        login: state.auth.login,\r\n        isFetching: state.auth.isFetching,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport const HeaderContainer = connect(mapToStateToProps, {logoutTC})(HeaderContainerComponent)","import React from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {Input} from '../../common/FormsControls/FormsControls';\r\nimport {maxLengthCreator, required} from '../../utils/validators/validators';\r\nimport s from '../../common/FormsControls/FormsControls.module.css'\r\n\r\nexport type FormDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    error: string\r\n}\r\n\r\nconst maxValue = maxLengthCreator(40)\r\n\r\nexport const LoginForm = React.memo((props: InjectedFormProps<FormDataType>) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <h1>Login</h1>\r\n            <div>\r\n                <Field placeholder={'Email'} name={'email'} component={Input} validate={[required, maxValue]}/>\r\n            </div>\r\n            <div>\r\n                <Field placeholder={'Password'} name={'password'} type={'password'} component={Input}\r\n                       validate={[required, maxValue]}/>\r\n            </div>\r\n            <div>\r\n                <Field type={'checkbox'} name={'rememberMe'} component={Input}/>\r\n                remember me\r\n            </div>\r\n            {\r\n                props.error &&\r\n                <div className={s.formSummaryError}>\r\n                    {props.error}\r\n                </div>\r\n            }\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>)\r\n})\r\n\r\nexport const LoginReduxForm = reduxForm<FormDataType>({form: 'login'})(LoginForm)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {loginTC} from '../../redux/auth-reducer';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {FormDataType, LoginReduxForm} from './LoginForm';\r\n\r\ntype mapDispatchPropsType = {\r\n    loginTC: (email: string, password: string, rememberMe: boolean) => void\r\n}\r\n\r\ntype mapStatePropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\ntype UsersContainerComponentPropsType = mapStatePropsType & mapDispatchPropsType;\r\n\r\nconst Login = React.memo((props: UsersContainerComponentPropsType) => {\r\n    const onSubmit = (formData: FormDataType) => {\r\n        const {email, password, rememberMe} = formData\r\n        props.loginTC(email, password, rememberMe)\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n    return (<div>\r\n        <LoginReduxForm onSubmit={onSubmit}/>\r\n    </div>)\r\n})\r\n\r\nexport default connect(mapStateToProps, {loginTC})(Login)\r\n\r\n","import {ThunkDispatch} from 'redux-thunk';\r\nimport {AppStateType, AppThunkType} from './redux-store';\r\nimport {getUserLoginTC} from './auth-reducer';\r\n\r\n//Const\r\nconst SET_INITIALIZED = 'SOCIAL_NETWORK/APP/SET_INITIALIZED';\r\n\r\n//State\r\nexport let initialState = {\r\n    isInitialized: false\r\n}\r\n\r\n//Reducer\r\nexport const appReducer = (state: InitialStateType = initialState, action: AppActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED:\r\n            return {\r\n                ...state,\r\n                isInitialized: action.isInitialized\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//Action type\r\ntype setInitializedAT = ReturnType<typeof setInitializedAC>\r\n\r\nexport type AppActionsTypes = setInitializedAT\r\n\r\n//Action creator\r\nexport const setInitializedAC = (isInitialized: boolean) => {\r\n    return {\r\n        type: SET_INITIALIZED, isInitialized\r\n    } as const\r\n}\r\n\r\n//Thunk creator\r\nexport const initializedTC = (): AppThunkType => {\r\n    return (dispatch: ThunkDispatch<AppStateType, unknown, AppActionsTypes>) => {\r\n        let promise = dispatch(getUserLoginTC())\r\n        Promise.all([promise])\r\n            .then(() => {\r\n                dispatch(setInitializedAC(true))\r\n            })\r\n            .catch(error => {\r\n                console.warn(error)\r\n            })\r\n    }\r\n}\r\n\r\n//Type\r\nexport type InitialStateType = typeof initialState\r\n","import {v1} from 'uuid';\r\nimport {ActionsTypes} from \"./store\";\r\n\r\n//State\r\nlet initialState = {\r\n    friends: [\r\n        {id: v1(), name: 'Dmitry'},\r\n        {id: v1(), name: 'Petr'},\r\n        {id: v1(), name: 'Andrey'}\r\n    ] as Array<friendsType>\r\n}\r\n\r\n//Reducer\r\nexport const sideBarReducer = (state: InitialStateType = initialState, action: ActionsTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//Type\r\nexport type InitialStateType = typeof initialState\r\n\r\nexport type friendsType = {\r\n    id: string\r\n    name: string\r\n}\r\n","import {applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport {ProfileActionsTypes, profileReducer} from './profile-reducer';\r\nimport {DialogsActionsTypes, dialogsReducer} from \"./dialogs-reducer\";\r\nimport {sideBarReducer} from './sideBar-reducer';\r\nimport {UsersActionsTypes, usersReducer} from './users-reducer';\r\nimport {AuthActionsTypes, authReducer} from './auth-reducer';\r\nimport thunk, {ThunkAction} from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport {AppActionsTypes, appReducer} from './app-reducer';\r\n\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\nexport type storeType= typeof store;\r\n\r\nlet rootReducer= combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sideBar: sideBarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\ntype AppActionsType = AuthActionsTypes\r\n    | DialogsActionsTypes\r\n    | AppActionsTypes\r\n    | ProfileActionsTypes\r\n    | UsersActionsTypes\r\n\r\nexport type AppThunkType<ReturnType = void> = ThunkAction<ReturnType,\r\n    AppStateType,\r\n    unknown,\r\n    AppActionsType>\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        REDUX_DEVTOOLS_EXTENSION_COMPOSE?: typeof compose\r\n    }\r\n}\r\n\r\nconst composeEnhancers = window.REDUX_DEVTOOLS_EXTENSION_COMPOSE || compose\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport './App.css';\r\nimport {HashRouter, Route, withRouter} from 'react-router-dom';\r\nimport News from './components/News/News';\r\nimport Music from './components/Music/Music';\r\nimport {Settings} from './components/Settings/Settings';\r\n//import {DialogsContainer} from './components/Dialogs/DialogsContainer';\r\nimport {NavbarContainer} from './components/NavBar/NavBarContainer';\r\nimport {UsersContainer} from './components/Users/UsersContainer';\r\nimport ProfileContainer from './components/Profile/ProfileContainer';\r\nimport {HeaderContainer} from './components/Header/HeaderContainer';\r\nimport Login from './components/Login/Login';\r\nimport {connect, Provider} from 'react-redux';\r\nimport {compose} from \"redux\";\r\nimport {initializedTC} from './redux/app-reducer';\r\nimport {AppStateType, store} from './redux/redux-store';\r\nimport {Preloader} from './common/Preloader/Preloader';\r\nimport {withSuspense} from \"./hoc/withSuspense\";\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\n\r\nexport type mapDispatchPropsType = {\r\n    initializedTC: () => void\r\n}\r\n\r\nexport type mapStatePropsType = {\r\n    initialized: boolean\r\n}\r\n\r\nexport type AppComponentPropsType = mapDispatchPropsType & mapStatePropsType;\r\n\r\nclass App extends React.PureComponent<AppComponentPropsType> {\r\n\r\n    componentDidMount() {\r\n        this.props.initializedTC()\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.initialized) {\r\n            return <Preloader/>\r\n        }\r\n\r\n        return (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer/>\r\n                <NavbarContainer/>\r\n                <div className='app-wrapper-content'>\r\n                    <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\r\n                    <Route path='/dialogs' component={withSuspense(DialogsContainer)}/>\r\n                    <Route path='/news' component={News}/>\r\n                    <Route path='/friends' component={() => <UsersContainer/>}/>\r\n                    <Route path='/music' component={Music}/>\r\n                    <Route path='/settings' component={Settings}/>\r\n                    <Route path='/login' component={Login}/>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nlet mapToStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n       initialized: state.app.isInitialized\r\n    }\r\n}\r\n\r\nlet AppContainer= compose<React.ComponentType>(\r\n    withRouter,\r\n    connect(mapToStateToProps,{initializedTC}))(App)\r\n\r\nconst SamuraiJSApp=()=> {\r\n    return (\r\n        <HashRouter>\r\n            <Provider store={store}>\r\n                <AppContainer />\r\n            </Provider>\r\n        </HashRouter>\r\n    )\r\n}\r\n\r\nexport default SamuraiJSApp;","import React, {ComponentType} from \"react\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\n\r\n\r\nexport function withSuspense<T>(Component: ComponentType<T>) {\r\n    return (restProps: T) => {\r\n    return <React.Suspense fallback={<Preloader/>}>\r\n        <Component {...restProps}/>\r\n    </React.Suspense>\r\n}\r\n}","import React from 'react';\r\nimport './index.css';\r\nimport ReactDOM from 'react-dom';\r\nimport SamuraiJSApp from './App';\r\n\r\n\r\nReactDOM.render(\r\n        <React.StrictMode>\r\n            <SamuraiJSApp/>\r\n        </React.StrictMode>,\r\n        document.getElementById('root')\r\n    );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","\r\nexport const required = (value: string) => {\r\n    if (value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\n\r\nexport const maxLengthCreator= (maxLength: number) => (value: string) => {\r\n    if (value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n   return undefined\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__h9sg1\",\"error\":\"FormsControls_error__11m4n\",\"formSummaryError\":\"FormsControls_formSummaryError__36qYg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3DgDn\",\"mainPhoto\":\"ProfileInfo_mainPhoto__239BD\",\"contactForm\":\"ProfileInfo_contactForm__3x3th\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Paginator_page__3G4xN\",\"currentPage\":\"Paginator_currentPage__1thiu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__ZK2GE\",\"posts\":\"MyPosts_posts__1delS\",\"error\":\"MyPosts_error__3mESq\",\"errorMessage\":\"MyPosts_errorMessage__30gYi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2Q4zb\",\"loginBlock\":\"Header_loginBlock__RR54G\"};"],"sourceRoot":""}